!function(){"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handeImageClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeBtn=this._card.querySelector("#card_like-button"),this._deleteBtn=this._card.querySelector(".card__delete-btn"),this._image=this._card.querySelector(".card__image"),this._likeBtn.addEventListener("click",(()=>this._toggleLikeBtn())),this._deleteBtn.addEventListener("click",(()=>this._removeCard())),this._image.addEventListener("click",(()=>this._openImage()))}_openImage(){this._handeImageClick(this._link,this._name)}_toggleLikeBtn(){this._likeBtn.classList.toggle("card__like-button_enabled")}_removeCard(){this._card.remove(),this._card=null}getView(){return this._card=this._getTemplate(),this._setEventListeners(),this._image.src=this._link,this._image.alt=this._name,this._card.querySelector(".card__title").textContent=this._name,this._card}}const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button-disabled",inputErrorClass:".modal__input-type-error",errorClass:"modal__error_visible",cardSectionClass:".cards__list",cardTeplate:".card__teplate"};class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._closeByEsc)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._closeByEsc)}_closeByEsc=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal")&&this.close(),e.target.classList.contains("modal__close-button")&&this.close()}))}}class i extends s{constructor(e,s){super({popupSelector:e}),this._popupFormEl=this._popupElement.querySelector(t.formSelector),this._inputEls=this._popupFormEl.querySelectorAll(t.inputSelector),this._handleSubmit=s}setInputValues(e){this._inputEls.forEach((t=>{t.value=e[t.name]}))}close(){super.close(),this._popupFormEl.reset()}_getInputValues(){const e={};return this._inputEls.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupFormEl.addEventListener("submit",(()=>{this._handleSubmit(this._getInputValues())}))}}const n=document.querySelector("#profile__add-button"),r=document.querySelector("#profile__edit-btn");function o(t){const s=function(t){return new e(t,"#card__template",l).getView()}(t);u.addItem(s)}function l(e,t){c.open(e,t)}new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse).then((e=>{console.log(e)}))}getUserIngo(){}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"cd8b3986-f3d6-4da9-8f48-96bc48ae4bb7","Content-Type":"application/json"}}).getInitialCards();const a=new class{constructor(e){let{title:t,subtitle:s}=e;this._nameEl=document.querySelector(t),this._jobEl=document.querySelector(s)}getUserInfo(){return{title:this._nameEl.textContent,subtitle:this._jobEl.textContent}}setUserInfo(e){this._nameEl.textContent=e.title,this._jobEl.textContent=e.subtitle}}({title:".profile__title",subtitle:".profile__subtitle"}),c=new class extends s{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector(".modal__image"),this._caption=this._popupElement.querySelector(".modal__image-caption")}open(e,t){super.open(),this._image.src=e,this._image.alt=t,this._caption.textContent=t}}("#card__image-modal"),_=new i("#profile__add-modal",(e=>{o(e),_.close()})),d=new i("#profile__edit-modal",(e=>{a.setUserInfo(e),d.close()})),u=new class{constructor(e,t){let{data:s,renderer:i}=e;this._renderedItems=s,this._renderer=i,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}}({data:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{o(e)}},t.cardSectionClass);u.renderItems();const h={};(e=>{Array.from(document.querySelectorAll(e.formSelector)).forEach((t=>{const s=new class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._buttonEl=this._formElement.querySelector(this._submitButtonSelector),this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)]}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e),this._toggleSubmitBtn(e)})),this._disableSubmitBtn(),this._formElement.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleSubmitBtn(e)}),0)}))}))}_checkValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleSubmitBtn(){this._hasInvalidInput()?this._disableSubmitBtn():this._enableSubmitBtn()}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_disableSubmitBtn(){this._buttonEl.classList.add(this._inactiveButtonClass),this._buttonEl.disabled=!0}_enableSubmitBtn(){this._buttonEl.classList.remove(this._inactiveButtonClass),this._buttonEl.disabled=!1}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}(e,t),i=t.getAttribute("name");h[i]=s,s.enableValidation()}))})(t),c.setEventListeners(),_.setEventListeners(),d.setEventListeners(),n.addEventListener("click",(()=>_.open())),r.addEventListener("click",(()=>{d.open(),d.setInputValues(a.getUserInfo())}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y2hELGlCQUFpQixTQUFTLElBQU1vRixFQUFhNUQsU0FDM0R5QixFQUFlakQsaUJBQWlCLFNBQVMsS0FDdkNxRixFQUFjN0QsT0FDZDZELEVBQWM1QyxlQUFlbUMsRUFBU0ssY0FBYyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ0biA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIiNjYXJkX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnRuID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idG5cIik7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2xpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX3RvZ2dsZUxpa2VCdG4oKSk7XHJcbiAgICB0aGlzLl9kZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX3JlbW92ZUNhcmQoKSk7XHJcbiAgICB0aGlzLl9pbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5fb3BlbkltYWdlKCkpO1xyXG4gIH1cclxuXHJcbiAgX29wZW5JbWFnZSgpIHtcclxuICAgIHRoaXMuX2hhbmRlSW1hZ2VDbGljayh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVMaWtlQnRuKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fZW5hYmxlZFwiKTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZDtcclxuICB9XHJcbn1cclxuIiwiLy9zZWxlY3RvcnMgZm9yIHZhbGlkYXRpb25cclxuXHJcbmNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnV0dG9uLWRpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIi5tb2RhbF9faW5wdXQtdHlwZS1lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxuICBjYXJkU2VjdGlvbkNsYXNzOiBcIi5jYXJkc19fbGlzdFwiLFxyXG4gIGNhcmRUZXBsYXRlOiBcIi5jYXJkX190ZXBsYXRlXCIsXHJcbn07XHJcblxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IHsgY29uZmlnLCBpbml0aWFsQ2FyZHMgfTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuICBvcGVuKCkge1xyXG4gICAgLy9vcGVuIHBvcHVwXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlQnlFc2MpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIC8vY2xvc2UgcG9wdXBcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fY2xvc2VCeUVzYyk7XHJcbiAgfVxyXG4gIF9jbG9zZUJ5RXNjID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnV0dG9uXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7ICAgIFxyXG4gICAgdGhpcy5fcG9wdXBGb3JtRWwgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuZm9ybVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gdGhpcy5fcG9wdXBGb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7ICAgIFxyXG4gIH1cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAvLyBoZXJlIHlvdSBpbnNlcnQgdGhlIGB2YWx1ZWAgYnkgdGhlIGBuYW1lYCBvZiB0aGUgaW5wdXRcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm1FbC5yZXNldCgpO1xyXG4gIH0gIFxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgLy9nZXQgYWxsIGlucHV0cyAgICBcclxuICAgIC8vbG9vcCBvdmVyIGFsbCBpbnB1dHNcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIC8vYXNzaWduIGlucHV0cyB0byBlbXB0eSBvYmplY3QgYnkgbmFtZT12YWx1ZVxyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsIi8vYnV0IHdoeSB3ZSBjYW5ub3QganVzdCB1c2UgVEFCIGluZGVudGF0aW9uIG9uIGNvZGUgZm9ybWF0dGluZz8gd2h5IGl0IHNob3VsZCBiZSBkb3VibGUgc3BhY2U/XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBjb25maWcsIGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZS9pbmRleC5jc3NcIjtcclxuXHJcbmNvbnN0IHByb2ZpbGVBZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19lZGl0LWJ0blwiKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICBpdGVtLFxyXG4gICAgXCIjY2FyZF9fdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2tcclxuICApLmdldFZpZXcoKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoaXRlbSkge1xyXG4gIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2sobmFtZSwgbGluaykge1xyXG4gIHBvcHVwSW1hZ2Uub3BlbihuYW1lLCBsaW5rKTtcclxufVxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJjZDhiMzk4Ni1mM2Q2LTRkYTktOGY0OC05NmJjNDhhZTRiYjdcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuYXBpLmdldEluaXRpYWxDYXJkcygpXHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgdGl0bGU6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXHJcbiAgc3VidGl0bGU6IFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNjYXJkX19pbWFnZS1tb2RhbFwiKTtcclxuXHJcbmNvbnN0IHBvcHVwQWRkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3Byb2ZpbGVfX2FkZC1tb2RhbFwiLCAoaW5wdXRWYWx1ZXMpID0+IHtcclxuICByZW5kZXJDYXJkKGlucHV0VmFsdWVzKTtcclxuICBwb3B1cEFkZEZvcm0uY2xvc2UoKTtcclxufSk7XHJcblxyXG5jb25zdCBwb3B1cEVkaXRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZV9fZWRpdC1tb2RhbFwiLFxyXG4gIChpbnB1dFZhbHVlcykgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMpO1xyXG4gICAgcG9wdXBFZGl0Rm9ybS5jbG9zZSgpO1xyXG4gIH1cclxuKTtcclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgZGF0YTogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgIHJlbmRlckNhcmQoaXRlbSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgY29uZmlnLmNhcmRTZWN0aW9uQ2xhc3NcclxuKTtcclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG4vLyBlbmFibGUgdmFsaWRhdGlvblxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XHJcbiAgICAvLyBoZXJlIHlvdSBnZXQgdGhlIG5hbWUgb2YgdGhlIGZvcm1cclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcclxuXHJcbiAgICAvLyBoZXJlIHlvdSBzdG9yZSBhIHZhbGlkYXRvciBieSB0aGUgYG5hbWVgIG9mIHRoZSBmb3JtXHJcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XHJcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbihjb25maWcpO1xyXG5cclxucG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEFkZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBFZGl0Rm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxucHJvZmlsZUFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gcG9wdXBBZGRGb3JtLm9wZW4oKSk7XHJcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcG9wdXBFZGl0Rm9ybS5vcGVuKCk7XHJcbiAgcG9wdXBFZGl0Rm9ybS5zZXRJbnB1dFZhbHVlcyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKXtcclxuICAgICAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICBnZXRJbml0aWFsQ2FyZHMoKXtcclxuICAgICAgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLHtcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZ28oKXtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgdGl0bGUsIHN1YnRpdGxlIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGl0bGUpO1xyXG4gICAgdGhpcy5fam9iRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHN1YnRpdGxlKTtcclxuICB9XHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0aXRsZTogdGhpcy5fbmFtZUVsLnRleHRDb250ZW50LFxyXG4gICAgICBzdWJ0aXRsZTogdGhpcy5fam9iRWwudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuICBzZXRVc2VySW5mbyh2YWx1ZSkge1xyXG4gICAgLy9zZXQgdXNlciBpbmZvIGZyb20gdmFsdWVcclxuICAgIHRoaXMuX25hbWVFbC50ZXh0Q29udGVudCA9IHZhbHVlLnRpdGxlO1xyXG4gICAgdGhpcy5fam9iRWwudGV4dENvbnRlbnQgPSB2YWx1ZS5zdWJ0aXRsZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtY2FwdGlvblwiKTtcclxuICB9XHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7ICAgIFxyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbmFtZTtcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gbGluaztcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCByZW5kZXJlciB9LCBjYXJkTGlzdCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGRhdGE7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkTGlzdCk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2J1dHRvbkVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ0bihpbnB1dEVsKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXRCdG4oKTtcclxuICAgICAgLy9yZXNldCBcImV2ZW50XCJcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcclxuICAgICAgICAvLyBgc2V0VGltZW91dGAgaXMgbmVlZGVkIHRvIHdhaXQgdGlsbCB0aGUgZm9ybSBpcyBmdWxseSByZXNldCBhbmQgdGhlbiB0byBjYWxsIGB0b2dnbGVCdXR0b25TdGF0ZWBcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ0bihpbnB1dEVsKTtcclxuICAgICAgICB9LCAwKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9jaGVja1ZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIC8vdGFraW5nIGlucHV0RWwgZnJvbSBldmVudCBsaXNlbmVyc1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWwuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVTdWJtaXRCdG4oKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdEJ0bigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlU3VibWl0QnRuKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZVN1Ym1pdEJ0bigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlU3VibWl0QnRuKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGVJbWFnZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnRuIiwiX2NhcmQiLCJfZGVsZXRlQnRuIiwiX2ltYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl90b2dnbGVMaWtlQnRuIiwiX3JlbW92ZUNhcmQiLCJfb3BlbkltYWdlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiZ2V0VmlldyIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJjYXJkU2VjdGlvbkNsYXNzIiwiY2FyZFRlcGxhdGUiLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJhZGQiLCJfY2xvc2VCeUVzYyIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtRWwiLCJfaW5wdXRFbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2hhbmRsZVN1Ym1pdCIsInNldElucHV0VmFsdWVzIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwicHJvZmlsZUFkZEJ0biIsInByb2ZpbGVFZGl0QnRuIiwicmVuZGVyQ2FyZCIsIml0ZW0iLCJjYXJkIiwiY3JlYXRlQ2FyZCIsImNhcmRTZWN0aW9uIiwiYWRkSXRlbSIsInBvcHVwSW1hZ2UiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJ0aGVuIiwiY29uc29sZSIsImxvZyIsImdldFVzZXJJbmdvIiwiYXV0aG9yaXphdGlvbiIsInVzZXJJbmZvIiwidGl0bGUiLCJzdWJ0aXRsZSIsIl9uYW1lRWwiLCJfam9iRWwiLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiX2NhcHRpb24iLCJwb3B1cEFkZEZvcm0iLCJwb3B1cEVkaXRGb3JtIiwiY2FyZExpc3QiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJmb3JtVmFsaWRhdG9ycyIsIkFycmF5IiwiZnJvbSIsImZvcm1FbGVtZW50IiwidmFsaWRhdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9idXR0b25FbCIsImlucHV0RWwiLCJfY2hlY2tWYWxpZGl0eSIsIl90b2dnbGVTdWJtaXRCdG4iLCJfZGlzYWJsZVN1Ym1pdEJ0biIsInNldFRpbWVvdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZW5hYmxlU3VibWl0QnRuIiwiZXZlcnkiLCJkaXNhYmxlZCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==