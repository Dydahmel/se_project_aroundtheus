!function(){"use strict";class e{constructor(e,t,s,i){this._id=e._id,this._name=e.name,this._link=e.link,this._cardSelector=t,this._handeImageClick=s,this._handleDeleteClick=i}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeBtn=this._card.querySelector("#card_like-button"),this._deleteBtn=this._card.querySelector(".card__delete-btn"),this._image=this._card.querySelector(".card__image"),this._likeBtn.addEventListener("click",(()=>this._toggleLikeBtn())),this._deleteBtn.addEventListener("click",(()=>this._handleDeleteClick(this._id))),this._image.addEventListener("click",(()=>this._openImage()))}_openImage(){this._handeImageClick(this._link,this._name)}_toggleLikeBtn(){this._likeBtn.classList.toggle("card__like-button_enabled")}removeCard(){this._card.remove(),this._card=null}getView(){return this._card=this._getTemplate(),this._setEventListeners(),this._image.src=this._link,this._image.alt=this._name,this._card.querySelector(".card__title").textContent=this._name,this._card}}const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button-disabled",inputErrorClass:".modal__input-type-error",errorClass:"modal__error_visible",cardSectionClass:".cards__list",cardTeplate:".card__teplate"};class s{constructor(e,t){let{data:s,renderer:i}=e;this._renderedItems=s,this._renderer=i,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}}class i{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._closeByEsc)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._closeByEsc)}_closeByEsc=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal")&&this.close(),e.target.classList.contains("modal__close-button")&&this.close()}))}}class r extends i{constructor(e,s){super({popupSelector:e}),this._popupFormEl=this._popupElement.querySelector(t.formSelector),this._inputEls=this._popupFormEl.querySelectorAll(t.inputSelector),this._handleSubmit=s}setInputValues(e){this._inputEls.forEach((t=>{t.value=e[t.name]}))}close(){super.close(),this._popupFormEl.reset()}_getInputValues(){const e={};return this._inputEls.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupFormEl.addEventListener("submit",(()=>{this._handleSubmit(this._getInputValues())}))}}class n{constructor(e){let{title:t,subtitle:s}=e;this._nameEl=document.querySelector(t),this._jobEl=document.querySelector(s)}getUserInfo(){return{name:this._nameEl.textContent,about:this._jobEl.textContent}}setUserInfo(e){this._nameEl.textContent=e.name,this._jobEl.textContent=e.about}}const o=document.querySelector("#profile__add-button"),l=document.querySelector("#profile__edit-btn");let a,c;function _(t){const s=function(t){return new e(t,"#card__template",d,h).getView()}(t);a.addItem(s)}function d(e,t){E.open(e,t)}function h(e){p.open(e)}const u=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}updateUserInfo(e){fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})})}addNewCard(e){fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})})}deleteCard(e){fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"cd8b3986-f3d6-4da9-8f48-96bc48ae4bb7","Content-Type":"application/json"}});u.getUserInfo().then((e=>{c=new n({title:".profile__title",subtitle:".profile__subtitle"}),c.setUserInfo(e)})),u.getInitialCards().then((e=>{a=new s({data:e,renderer:e=>{_(e)}},t.cardSectionClass),a.renderItems()}));const m=new r("#profile__edit-modal",(e=>{c.setUserInfo(e),u.updateUserInfo(e),m.close()})),p=new class extends i{constructor(e,t){super({popupSelector:e}),this._submitBtn=this._popupElement.querySelector(".modal__save-button"),this._handleDelete=t}open(e){super.open(),this._cardId=e}setEventListeners(){super.setEventListeners(),this._submitBtn.addEventListener("mousedown",(()=>{this._handleDelete(this._cardId),console.log("button is working")}))}}("#card__delete-modal",(e=>{u.deleteCard(e),p.close()})),E=new class extends i{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector(".modal__image"),this._caption=this._popupElement.querySelector(".modal__image-caption")}open(e,t){super.open(),this._image.src=e,this._image.alt=t,this._caption.textContent=t}}("#card__image-modal"),b=new r("#profile__add-modal",(e=>{u.addNewCard(e),_(e),b.close()})),S={};(e=>{Array.from(document.querySelectorAll(e.formSelector)).forEach((t=>{const s=new class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._buttonEl=this._formElement.querySelector(this._submitButtonSelector),this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)]}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e),this._toggleSubmitBtn(e)})),this._disableSubmitBtn(),this._formElement.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleSubmitBtn(e)}),0)}))}))}_checkValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleSubmitBtn(){this._hasInvalidInput()?this._disableSubmitBtn():this._enableSubmitBtn()}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_disableSubmitBtn(){this._buttonEl.classList.add(this._inactiveButtonClass),this._buttonEl.disabled=!0}_enableSubmitBtn(){this._buttonEl.classList.remove(this._inactiveButtonClass),this._buttonEl.disabled=!1}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}(e,t),i=t.getAttribute("name");S[i]=s,s.enableValidation()}))})(t),E.setEventListeners(),b.setEventListeners(),m.setEventListeners(),p.setEventListeners(),o.addEventListener("click",(()=>b.open())),l.addEventListener("click",(()=>{m.open(),m.setInputValues(c.getUserInfo())}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WGtFLEVBQWFsRSxvQkFDYjBELEVBQWMxRCxvQkFDZGlDLEVBQVlqQyxvQkFDWndCLEVBQWNuRSxpQkFBaUIsU0FBUyxJQUFNNkcsRUFBYXpFLFNBQzNEZ0MsRUFBZXBFLGlCQUFpQixTQUFTLEtBQ3ZDcUcsRUFBY2pFLE9BQ2RpRSxFQUFjaEQsZUFBZWlCLEVBQVNOLGNBQWMsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwRGVsZXRlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrLCBoYW5kbGVEZWxldGVDbGljaykge1xyXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWwgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIGNhcmRFbDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdG4gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZF9saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ0biA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9saWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl90b2dnbGVMaWtlQnRuKCkpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzLl9pZCkpO1xyXG4gICAgdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX29wZW5JbWFnZSgpKTtcclxuICB9XHJcblxyXG4gIF9vcGVuSW1hZ2UoKSB7XHJcbiAgICB0aGlzLl9oYW5kZUltYWdlQ2xpY2sodGhpcy5fbGluaywgdGhpcy5fbmFtZSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlTGlrZUJ0bigpIHtcclxuICAgIHRoaXMuX2xpa2VCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2VuYWJsZWRcIik7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZDtcclxuICB9XHJcbn1cclxuIiwiLy9zZWxlY3RvcnMgZm9yIHZhbGlkYXRpb25cclxuXHJcbmNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnV0dG9uLWRpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIi5tb2RhbF9faW5wdXQtdHlwZS1lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxuICBjYXJkU2VjdGlvbkNsYXNzOiBcIi5jYXJkc19fbGlzdFwiLFxyXG4gIGNhcmRUZXBsYXRlOiBcIi5jYXJkX190ZXBsYXRlXCIsXHJcbn07XHJcblxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IHsgY29uZmlnLCBpbml0aWFsQ2FyZHMgfTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCByZW5kZXJlciB9LCBjYXJkTGlzdCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGRhdGE7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkTGlzdCk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuICBvcGVuKCkge1xyXG4gICAgLy9vcGVuIHBvcHVwXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlQnlFc2MpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIC8vY2xvc2UgcG9wdXBcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fY2xvc2VCeUVzYyk7XHJcbiAgfVxyXG4gIF9jbG9zZUJ5RXNjID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnV0dG9uXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7ICAgIFxyXG4gICAgdGhpcy5fcG9wdXBGb3JtRWwgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuZm9ybVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gdGhpcy5fcG9wdXBGb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7ICAgIFxyXG4gIH1cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAvLyBoZXJlIHlvdSBpbnNlcnQgdGhlIGB2YWx1ZWAgYnkgdGhlIGBuYW1lYCBvZiB0aGUgaW5wdXRcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm1FbC5yZXNldCgpO1xyXG4gIH0gIFxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgLy9nZXQgYWxsIGlucHV0cyAgICBcclxuICAgIC8vbG9vcCBvdmVyIGFsbCBpbnB1dHNcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIC8vYXNzaWduIGlucHV0cyB0byBlbXB0eSBvYmplY3QgYnkgbmFtZT12YWx1ZVxyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHRpdGxlLCBzdWJ0aXRsZSB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRpdGxlKTtcclxuICAgIHRoaXMuX2pvYkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzdWJ0aXRsZSk7XHJcbiAgfVxyXG4gIFxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsLnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dDogdGhpcy5fam9iRWwudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuICBzZXRVc2VySW5mbyh2YWx1ZSkge1xyXG4gICAgXHJcbiAgICAvL3NldCB1c2VyIGluZm8gZnJvbSB2YWx1ZVxyXG4gICAgdGhpcy5fbmFtZUVsLnRleHRDb250ZW50ID0gdmFsdWUubmFtZTtcclxuICAgIHRoaXMuX2pvYkVsLnRleHRDb250ZW50ID0gdmFsdWUuYWJvdXQ7XHJcbiAgfVxyXG59XHJcbiIsIi8vYnV0IHdoeSB3ZSBjYW5ub3QganVzdCB1c2UgVEFCIGluZGVudGF0aW9uIG9uIGNvZGUgZm9ybWF0dGluZz8gd2h5IGl0IHNob3VsZCBiZSBkb3VibGUgc3BhY2U/XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBQb3B1cERlbGV0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cERlbGV0ZS5qc1wiO1xyXG5pbXBvcnQgXCIuLi9wYWdlL2luZGV4LmNzc1wiO1xyXG5cclxuY29uc3QgcHJvZmlsZUFkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2VkaXQtYnRuXCIpO1xyXG4vL3BsYWNlaG9sZGVyIGZvciBzZWN0aW9uXHJcbmxldCBjYXJkU2VjdGlvbjtcclxuLy9wbGFjZWhvbGRlciBmb3IgdXNlckluZm9cclxubGV0IHVzZXJJbmZvO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIGl0ZW0sXHJcbiAgICBcIiNjYXJkX190ZW1wbGF0ZVwiLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrXHJcbiAgKS5nZXRWaWV3KCk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGl0ZW0pIHtcclxuICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChpdGVtKTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcclxuICBwb3B1cEltYWdlLm9wZW4obmFtZSwgbGluayk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNsaWNrKGNhcmRJZCl7ICBcclxuICBwb3B1cERlbGV0ZS5vcGVuKGNhcmRJZClcclxuICBcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vbmV3IGluc3Qgb2YgQVBJKHNldCBvcHRpb25zKVxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImNkOGIzOTg2LWYzZDYtNGRhOS04ZjQ4LTk2YmM0OGFlNGJiN1wiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5hcGkuZ2V0VXNlckluZm8oKS50aGVuKChyZXMpID0+IHtcclxuICAvL25ldyBVc2VySW5mbyBcclxuICB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgICB0aXRsZTogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICAgIHN1YnRpdGxlOiBcIi5wcm9maWxlX19zdWJ0aXRsZVwiLFxyXG4gIH0pO1xyXG4gIC8vc2V0dGluZyB1c2VySW5mbyBmcm9tIHNlcnZlclxyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcylcclxufSlcclxuXHJcbi8vIGxvYWRlZCBjYXJkcyBmcm9tIHNlcnZlclxyXG5hcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigocmVzKSA9PiB7XHJcbiAgLy9uZXcgc2VjdGlvblxyXG4gIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICB7XHJcbiAgICAgIC8vdXNpbmcgZGF0YSBmcm9tIHNlcnZlclxyXG4gICAgICBkYXRhOiByZXMsXHJcbiAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgIHJlbmRlckNhcmQoaXRlbSk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgY29uZmlnLmNhcmRTZWN0aW9uQ2xhc3NcclxuICApO1xyXG4gIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IHBvcHVwRWRpdEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlX19lZGl0LW1vZGFsXCIsXHJcbiAgKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dFZhbHVlcyk7XHJcbiAgICAvL3VwZGF0aW5nIHVzZXJJbmZvIChvbj9hdD9pbikgc2VydmVyXHJcbiAgICBhcGkudXBkYXRlVXNlckluZm8oaW5wdXRWYWx1ZXMpXHJcbiAgICBwb3B1cEVkaXRGb3JtLmNsb3NlKCk7XHJcbiAgfVxyXG4pO1xyXG5cclxuXHJcblxyXG5jb25zdCBwb3B1cERlbGV0ZSA9IG5ldyBQb3B1cERlbGV0ZShcIiNjYXJkX19kZWxldGUtbW9kYWxcIiwgKGNhcmRJZCkgPT4ge1xyXG4gIGFwaS5kZWxldGVDYXJkKGNhcmRJZCk7ICAgXHJcbiAgcG9wdXBEZWxldGUuY2xvc2UoKTsgIFxyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjY2FyZF9faW1hZ2UtbW9kYWxcIik7XHJcblxyXG5jb25zdCBwb3B1cEFkZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlX19hZGQtbW9kYWxcIiwgKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgYXBpLmFkZE5ld0NhcmQoaW5wdXRWYWx1ZXMpXHJcbiAgcmVuZGVyQ2FyZChpbnB1dFZhbHVlcyk7XHJcbiAgcG9wdXBBZGRGb3JtLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5cclxuLy8gZW5hYmxlIHZhbGlkYXRpb25cclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xyXG4gICAgLy8gaGVyZSB5b3UgZ2V0IHRoZSBuYW1lIG9mIHRoZSBmb3JtXHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcblxyXG4gICAgLy8gaGVyZSB5b3Ugc3RvcmUgYSB2YWxpZGF0b3IgYnkgdGhlIGBuYW1lYCBvZiB0aGUgZm9ybVxyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcclxuXHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBBZGRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwRWRpdEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBEZWxldGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucHJvZmlsZUFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gcG9wdXBBZGRGb3JtLm9wZW4oKSk7XHJcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcG9wdXBFZGl0Rm9ybS5vcGVuKCk7XHJcbiAgcG9wdXBFZGl0Rm9ybS5zZXRJbnB1dFZhbHVlcyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKXtcclxuICAgICAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgICAgIGlmIChyZXMub2spIHsgICAgICAgICAgXHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgZ2V0SW5pdGlhbENhcmRzKCl7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2Ase1xyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSkgXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKXtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCx7XHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICB1cGRhdGVVc2VySW5mbyhpbnB1dCl7XHJcbiAgICAgIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgbmFtZTogaW5wdXQubmFtZSAsXHJcbiAgICAgICAgICBhYm91dDogaW5wdXQuYWJvdXRcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGROZXdDYXJkKGlucHV0KXtcclxuICAgICAgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5hbWU6IGlucHV0Lm5hbWUsXHJcbiAgICAgICAgICBsaW5rOiBpbnB1dC5saW5rXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVDYXJkKGNhcmRJZCl7XHJcbiAgICAgIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAse1xyXG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwRGVsZXRlIGV4dGVuZHMgUG9wdXB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVEZWxldGUpe1xyXG4gICAgICAgIHN1cGVyKHtwb3B1cFNlbGVjdG9yfSlcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZS1idXR0b25cIik7ICAgICAgICBcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGUgPSBoYW5kbGVEZWxldGU7ICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oY2FyZElkKXtcclxuICAgICAgICBzdXBlci5vcGVuKClcclxuICAgICAgICB0aGlzLl9jYXJkSWQgPSBjYXJkSWRcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKClcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZSh0aGlzLl9jYXJkSWQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYnV0dG9uIGlzIHdvcmtpbmcnKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSAgICBcclxufTsiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1jYXB0aW9uXCIpO1xyXG4gIH1cclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIHN1cGVyLm9wZW4oKTsgICAgXHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbGluaztcclxuICAgIHRoaXMuX2NhcHRpb24udGV4dENvbnRlbnQgPSBsaW5rO1xyXG4gIH1cclxufVxyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5fYnV0dG9uRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrVmFsaWRpdHkoaW5wdXRFbCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlU3VibWl0QnRuKGlucHV0RWwpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdEJ0bigpO1xyXG4gICAgICAvL3Jlc2V0IFwiZXZlbnRcIlxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIC8vIGBzZXRUaW1lb3V0YCBpcyBuZWVkZWQgdG8gd2FpdCB0aWxsIHRoZSBmb3JtIGlzIGZ1bGx5IHJlc2V0IGFuZCB0aGVuIHRvIGNhbGwgYHRvZ2dsZUJ1dHRvblN0YXRlYFxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fdG9nZ2xlU3VibWl0QnRuKGlucHV0RWwpO1xyXG4gICAgICAgIH0sIDApO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrVmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgLy90YWtpbmcgaW5wdXRFbCBmcm9tIGV2ZW50IGxpc2VuZXJzXHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWwuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZVN1Ym1pdEJ0bigpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlU3VibWl0QnRuKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbmFibGVTdWJtaXRCdG4oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF9kaXNhYmxlU3VibWl0QnRuKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVTdWJtaXRCdG4oKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWwuZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsInRoaXMiLCJfaWQiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ0biIsIl9jYXJkIiwiX2RlbGV0ZUJ0biIsIl9pbWFnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdG9nZ2xlTGlrZUJ0biIsIl9vcGVuSW1hZ2UiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmVDYXJkIiwicmVtb3ZlIiwiZ2V0VmlldyIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJjYXJkU2VjdGlvbkNsYXNzIiwiY2FyZFRlcGxhdGUiLCJTZWN0aW9uIiwiX3JlZiIsImNhcmRMaXN0IiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJyZW5kZXJJdGVtcyIsImZvckVhY2giLCJpdGVtIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJhZGQiLCJfY2xvc2VCeUVzYyIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtRWwiLCJfaW5wdXRFbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2hhbmRsZVN1Ym1pdCIsInNldElucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJVc2VySW5mbyIsInRpdGxlIiwic3VidGl0bGUiLCJfbmFtZUVsIiwiX2pvYkVsIiwiZ2V0VXNlckluZm8iLCJhYm91dCIsInNldFVzZXJJbmZvIiwicHJvZmlsZUFkZEJ0biIsInByb2ZpbGVFZGl0QnRuIiwiY2FyZFNlY3Rpb24iLCJ1c2VySW5mbyIsInJlbmRlckNhcmQiLCJjYXJkIiwiY3JlYXRlQ2FyZCIsInBvcHVwSW1hZ2UiLCJjYXJkSWQiLCJwb3B1cERlbGV0ZSIsImFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJ1cGRhdGVVc2VySW5mbyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkTmV3Q2FyZCIsImRlbGV0ZUNhcmQiLCJhdXRob3JpemF0aW9uIiwicG9wdXBFZGl0Rm9ybSIsImhhbmRsZURlbGV0ZSIsIl9zdWJtaXRCdG4iLCJfaGFuZGxlRGVsZXRlIiwiX2NhcmRJZCIsImNvbnNvbGUiLCJsb2ciLCJfY2FwdGlvbiIsInBvcHVwQWRkRm9ybSIsImZvcm1WYWxpZGF0b3JzIiwiQXJyYXkiLCJmcm9tIiwiZm9ybUVsZW1lbnQiLCJ2YWxpZGF0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2J1dHRvbkVsIiwiaW5wdXRFbCIsIl9jaGVja1ZhbGlkaXR5IiwiX3RvZ2dsZVN1Ym1pdEJ0biIsIl9kaXNhYmxlU3VibWl0QnRuIiwic2V0VGltZW91dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9lbmFibGVTdWJtaXRCdG4iLCJldmVyeSIsImRpc2FibGVkIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9