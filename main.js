!function(){"use strict";class e{constructor(e,t,s,r,i,n){this._id=e._id,this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteClick=r,this._userId=i,this._cardOwnerId=e.owner._id,this._handleLikeClick=n,this._likeArr=e.likes}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeBtn=this._card.querySelector("#card_like-button"),this._deleteBtn=this._card.querySelector(".card__delete-btn"),this._image=this._card.querySelector(".card__image"),this._likeBtn.addEventListener("click",(()=>{this._toggleLikeBtn(),this._handleLikeClick(this._id)})),this._deleteBtn.addEventListener("click",(()=>this._handleDeleteClick(this._id))),this._image.addEventListener("click",(()=>this._openImage()))}_openImage(){this._handleImageClick(this._link,this._name)}_toggleLikeBtn(){this._likeBtn.classList.toggle("card__like-button_enabled")}isLiked(){return this._likeArr.some((e=>{let{_id:t}=e;return t===this._userId}))}_renderLikesCounter(){this._likeCounter=this._card.querySelector(".card__like_counter"),this._likeCounter.textContent=this._likeArr.length}updateLikesCounter(e){this._likeArr=e,this._renderLikesCounter()}removeCard(){this._card.remove(),this._card=null}getView(){return this._card=this._getTemplate(),this._setEventListeners(),this._image.src=this._link,this._image.alt=this._name,this._card.querySelector(".card__title").textContent=this._name,this._userId!==this._cardOwnerId&&this._deleteBtn.remove(),this.isLiked()&&this._toggleLikeBtn(),this._renderLikesCounter(),this._card}}const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button-disabled",inputErrorClass:".modal__input-type-error",errorClass:"modal__error_visible",cardSectionClass:".cards__list",cardTeplate:".card__teplate"};class s{constructor(e,t){let{data:s,renderer:r}=e;this._renderedItems=s,this._renderer=r,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}}class r{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._closeByEsc)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._closeByEsc)}_closeByEsc=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal")&&this.close(),e.target.classList.contains("modal__close-button")&&this.close()}))}}class i extends r{constructor(e,s){super({popupSelector:e}),this._popupFormEl=this._popupElement.querySelector(t.formSelector),this._inputEls=this._popupFormEl.querySelectorAll(t.inputSelector),this._handleSubmit=s,this._submitBtn=this._popupFormEl.querySelector(t.submitButtonSelector)}setInputValues(e){this._inputEls.forEach((t=>{t.value=e[t.name]}))}close(){super.close(),this._popupFormEl.reset()}_getInputValues(){const e={};return this._inputEls.forEach((t=>{e[t.name]=t.value})),e}toggleSaveBtn(){this._submitBtn.classList.toggle("modal__saving-button"),console.log("its working")}setEventListeners(){super.setEventListeners(),this._popupFormEl.addEventListener("submit",(()=>{this._handleSubmit(this._getInputValues())}))}}class n{constructor(e){let{title:t,subtitle:s}=e;this._nameEl=document.querySelector(t),this._jobEl=document.querySelector(s)}getUserInfo(){return{name:this._nameEl.textContent,about:this._jobEl.textContent}}setUserInfo(e){this._nameEl.textContent=e.name,this._jobEl.textContent=e.about}}const o=document.querySelector("#profile__add-button"),a=document.querySelector("#profile__edit-btn"),l=document.querySelector("#profile__avatar-btn"),h=document.querySelector(".profile__picture");let c,_,d;function u(t){const s=function(t){return new e(t,"#card__template",m,p,d,E).getView()}(t);c.addItem(s)}function m(e,t){g.open(e,t)}function p(e){S.open(),S.setSubmitAction((()=>{b.deleteCard(e).then((()=>{this.removeCard(),S.close()}))}))}function E(e){this.isLiked()?b.removeLike(e).then((e=>{this.updateLikesCounter(e.likes)})):b.addLike(e).then((e=>{this.updateLikesCounter(e.likes)}))}const b=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}getAppInfo(){return Promise.all([this.getInitialCards,this.getUserInfo]).then((e=>{console.log(e)}))}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}updateUserInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkResponse)}addNewCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}addLike(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}removeLike(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}updateProfilePicture(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})}).then(this._checkResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"cd8b3986-f3d6-4da9-8f48-96bc48ae4bb7","Content-Type":"application/json"}});b.getAppInfo().then(b.getUserInfo().then((e=>{d=e._id,h.src=e.avatar,_=new n({title:".profile__title",subtitle:".profile__subtitle"}),_.setUserInfo(e)}))).then(b.getInitialCards().then((e=>{c=new s({data:e,renderer:e=>{u(e)}},t.cardSectionClass),c.renderItems()}))).catch((e=>{console.error(e)}));const k=new i("#profile__edit-modal",(e=>{_.setUserInfo(e),b.updateUserInfo(e).catch((e=>{console.error(e)})),k.close()})),v=new i("#profile__avatar_modal",(e=>{v.toggleSaveBtn(),b.updateProfilePicture(e).then((e=>{h.src=e.avatar})).catch((e=>{console.error(e)}))})),S=new class extends r{constructor(e){super({popupSelector:e}),this._submitBtn=this._popupElement.querySelector(".modal__save-button")}setSubmitAction(e){this._handleDelete=e}setEventListeners(){super.setEventListeners(),this._submitBtn.addEventListener("mousedown",(()=>{this._handleDelete()}))}}("#card__delete-modal"),g=new class extends r{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector(".modal__image"),this._caption=this._popupElement.querySelector(".modal__image-caption")}open(e,t){super.open(),this._image.src=e,this._image.alt=t,this._caption.textContent=t}}("#card__image-modal"),f=new i("#profile__add-modal",(e=>{b.addNewCard(e).then((e=>u(e))).catch((e=>{console.error(e)})),f.close()})),L={};(e=>{Array.from(document.querySelectorAll(e.formSelector)).forEach((t=>{const s=new class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._buttonEl=this._formElement.querySelector(this._submitButtonSelector),this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)]}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e),this._toggleSubmitBtn(e)})),this._disableSubmitBtn(),this._formElement.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleSubmitBtn(e)}),0)}))}))}_checkValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleSubmitBtn(){this._hasInvalidInput()?this._disableSubmitBtn():this._enableSubmitBtn()}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_disableSubmitBtn(){this._buttonEl.classList.add(this._inactiveButtonClass),this._buttonEl.disabled=!0}_enableSubmitBtn(){this._buttonEl.classList.remove(this._inactiveButtonClass),this._buttonEl.disabled=!1}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}(e,t),r=t.getAttribute("name");L[r]=s,s.enableValidation()}))})(t),g.setEventListeners(),f.setEventListeners(),k.setEventListeners(),S.setEventListeners(),v.setEventListeners(),o.addEventListener("click",(()=>f.open())),a.addEventListener("click",(()=>{k.open(),k.setInputValues(_.getUserInfo())})),l.addEventListener("click",(()=>{v.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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M0Usb0JBQ2hCNEIsRUFBYzdFLGlCQUFpQixTQUFTLElBQU1nSSxFQUFhdEYsU0FDM0RvQyxFQUFlOUUsaUJBQWlCLFNBQVMsS0FDdkMySCxFQUFjakYsT0FDZGlGLEVBQWMvRCxlQUFlc0IsRUFBU1IsY0FBYyxJQUV0REssRUFBaUIvRSxpQkFBaUIsU0FBUyxLQUN6QzRILEVBQWdCbEYsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBEZWxldGUuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCB1c2VySWQsIGhhbmRsZUxpa2VDbGljaykge1xyXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgdGhpcy5fY2FyZE93bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICAgIHRoaXMuX2xpa2VBcnIgPSBkYXRhLmxpa2VzO1xyXG4gICAgXHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWwgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIGNhcmRFbDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdG4gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZF9saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ0biA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9saWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7dGhpcy5fdG9nZ2xlTGlrZUJ0bigpLCB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcy5faWQpO30pO1xyXG4gICAgdGhpcy5fZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzLl9pZCkpO1xyXG4gICAgdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX29wZW5JbWFnZSgpKTtcclxuICB9XHJcblxyXG4gIF9vcGVuSW1hZ2UoKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX2xpbmssIHRoaXMuX25hbWUpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUxpa2VCdG4oKSB7XHJcbiAgICB0aGlzLl9saWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9lbmFibGVkXCIpO1xyXG4gIH1cclxuXHJcbiAgaXNMaWtlZCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuX2xpa2VBcnIuc29tZSgoe19pZH0pID0+IHsgICAgICBcclxuICAgICAgcmV0dXJuIF9pZCA9PT0gdGhpcy5fdXNlcklkICAgICAgIFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIF9yZW5kZXJMaWtlc0NvdW50ZXIoKXtcclxuICAgIHRoaXMuX2xpa2VDb3VudGVyID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VfY291bnRlclwiKSAgICBcclxuICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZUFyci5sZW5ndGhcclxuXHJcbiAgfVxyXG5cclxuICB1cGRhdGVMaWtlc0NvdW50ZXIobGlrZXMpe1xyXG4gICAgdGhpcy5fbGlrZUFyciA9IGxpa2VzO1xyXG4gICAgdGhpcy5fcmVuZGVyTGlrZXNDb3VudGVyKClcclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkLnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgLy9jaGVjayBpZiB1c2VyIGFuZCBvd25lciBJRCBtYXRjaGVzXHJcbiAgICBpZih0aGlzLl91c2VySWQgIT09IHRoaXMuX2NhcmRPd25lcklkKXtcclxuICAgICAgdGhpcy5fZGVsZXRlQnRuLnJlbW92ZSgpXHJcbiAgICB9IFxyXG4gICAgaWYodGhpcy5pc0xpa2VkKCkpe1xyXG4gICAgICB0aGlzLl90b2dnbGVMaWtlQnRuKClcclxuICAgIH1cclxuICAgIHRoaXMuX3JlbmRlckxpa2VzQ291bnRlcigpXHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XHJcbiAgfVxyXG59XHJcbiIsIi8vc2VsZWN0b3JzIGZvciB2YWxpZGF0aW9uXHJcblxyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc2F2ZS1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlLWJ1dHRvbi1kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCIubW9kYWxfX2lucHV0LXR5cGUtZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbiAgY2FyZFNlY3Rpb25DbGFzczogXCIuY2FyZHNfX2xpc3RcIixcclxuICBjYXJkVGVwbGF0ZTogXCIuY2FyZF9fdGVwbGF0ZVwiLFxyXG59O1xyXG5cclxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCB7IGNvbmZpZywgaW5pdGlhbENhcmRzIH07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY2FyZExpc3QpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBkYXRhO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZExpc3QpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIC8vb3BlbiBwb3B1cFxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9jbG9zZUJ5RXNjKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICAvL2Nsb3NlIHBvcHVwXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlQnlFc2MpO1xyXG4gIH1cclxuICBfY2xvc2VCeUVzYyA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlLWJ1dHRvblwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pOyAgICBcclxuICAgIHRoaXMuX3BvcHVwRm9ybUVsID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLmZvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IHRoaXMuX3BvcHVwRm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXBGb3JtRWwucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpOyAgICBcclxuICB9XHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgLy8gaGVyZSB5b3UgaW5zZXJ0IHRoZSBgdmFsdWVgIGJ5IHRoZSBgbmFtZWAgb2YgdGhlIGlucHV0XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtRWwucmVzZXQoKTtcclxuICB9ICBcclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIC8vZ2V0IGFsbCBpbnB1dHMgICAgXHJcbiAgICAvL2xvb3Agb3ZlciBhbGwgaW5wdXRzXHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAvL2Fzc2lnbiBpbnB1dHMgdG8gZW1wdHkgb2JqZWN0IGJ5IG5hbWU9dmFsdWVcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlU2F2ZUJ0bigpe1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJtb2RhbF9fc2F2aW5nLWJ1dHRvblwiKVxyXG4gICAgY29uc29sZS5sb2coXCJpdHMgd29ya2luZ1wiKVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyB0aXRsZSwgc3VidGl0bGUgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aXRsZSk7XHJcbiAgICB0aGlzLl9qb2JFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc3VidGl0bGUpO1xyXG4gIH1cclxuICBcclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbC50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX2pvYkVsLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbiAgc2V0VXNlckluZm8odmFsdWUpIHtcclxuICAgIFxyXG4gICAgLy9zZXQgdXNlciBpbmZvIGZyb20gdmFsdWVcclxuICAgIHRoaXMuX25hbWVFbC50ZXh0Q29udGVudCA9IHZhbHVlLm5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbC50ZXh0Q29udGVudCA9IHZhbHVlLmFib3V0O1xyXG4gIH1cclxufVxyXG4iLCIvL2J1dCB3aHkgd2UgY2Fubm90IGp1c3QgdXNlIFRBQiBpbmRlbnRhdGlvbiBvbiBjb2RlIGZvcm1hdHRpbmc/IHdoeSBpdCBzaG91bGQgYmUgZG91YmxlIHNwYWNlP1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBEZWxldGUgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBEZWxldGUuanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZS9pbmRleC5jc3NcIjtcclxuXHJcbmNvbnN0IHByb2ZpbGVBZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19lZGl0LWJ0blwiKTtcclxuY29uc3QgcHJvZmlsZUF2YXRhckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fYXZhdGFyLWJ0blwiKTtcclxuY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcGljdHVyZVwiKTtcclxuXHJcbi8vcGxhY2Vob2xkZXIgZm9yIHNlY3Rpb25cclxubGV0IGNhcmRTZWN0aW9uO1xyXG4vL3BsYWNlaG9sZGVyIGZvciB1c2VySW5mb1xyXG5sZXQgdXNlckluZm87XHJcbi8vcGxhY2Vob2xkZXIgZm9yIHVzZXJJZFxyXG5sZXQgdXNlcklkO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIGl0ZW0sXHJcbiAgICBcIiNjYXJkX190ZW1wbGF0ZVwiLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gICAgdXNlcklkLFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrXHJcbiAgKS5nZXRWaWV3KCk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGl0ZW0pIHtcclxuICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChpdGVtKTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcclxuICBwb3B1cEltYWdlLm9wZW4obmFtZSwgbGluayk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNsaWNrKGNhcmRJZCl7ICBcclxuICBwb3B1cERlbGV0ZS5vcGVuKClcclxuICBwb3B1cERlbGV0ZS5zZXRTdWJtaXRBY3Rpb24oICgpID0+e1xyXG4gICAgYXBpLmRlbGV0ZUNhcmQoY2FyZElkKS50aGVuKCAoKSA9PiB7ICAgICAgXHJcbiAgICAgIHRoaXMucmVtb3ZlQ2FyZCgpXHJcbiAgICAgIHBvcHVwRGVsZXRlLmNsb3NlKClcclxuICAgIH0pXHJcbiAgfSkgIFxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2xpY2soY2FyZElkKXsgIFxyXG4gIGlmKHRoaXMuaXNMaWtlZCgpKXtcclxuICAgIGFwaS5yZW1vdmVMaWtlKGNhcmRJZCkudGhlbigocmVzKSA9PiB7dGhpcy51cGRhdGVMaWtlc0NvdW50ZXIocmVzLmxpa2VzKX0pICAgXHJcbiAgfVxyXG4gIGVsc2V7XHJcbiAgICBhcGkuYWRkTGlrZShjYXJkSWQpLnRoZW4oKHJlcykgPT4ge3RoaXMudXBkYXRlTGlrZXNDb3VudGVyKHJlcy5saWtlcyl9KSAgXHJcbiAgIFxyXG4gIH0gIFxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vL25ldyBpbnN0IG9mIEFQSShzZXQgb3B0aW9ucylcclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJjZDhiMzk4Ni1mM2Q2LTRkYTktOGY0OC05NmJjNDhhZTRiYjdcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuYXBpLmdldEFwcEluZm8oKVxyXG4gIC50aGVuKGFwaS5nZXRVc2VySW5mbygpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIC8vYXNzaWduIG5ldyB2YWx1ZSBmb3IgdXNlcklkXHJcbiAgICAgIHVzZXJJZCA9IHJlcy5faWQ7XHJcbiAgICAgIC8vYXNzaWduIGF2YXRhclxyXG4gICAgICBwcm9maWxlQXZhdGFyLnNyYyA9IHJlcy5hdmF0YXIgIFxyXG4gICAgICAvL25ldyBVc2VySW5mbyBcclxuICAgICAgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gICAgICAgIHRpdGxlOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gICAgICAgIHN1YnRpdGxlOiBcIi5wcm9maWxlX19zdWJ0aXRsZVwiLFxyXG4gICAgICB9KSAgXHJcbiAgICAgIC8vc2V0dGluZyB1c2VySW5mbyBmcm9tIHNlcnZlclxyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMpXHJcbiAgICB9KSlcclxuICAudGhlbihcclxuICAgIC8vIGxvYWRlZCBjYXJkcyBmcm9tIHNlcnZlclxyXG4gICAgYXBpLmdldEluaXRpYWxDYXJkcygpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgLy9uZXcgc2VjdGlvblxyXG4gICAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIC8vdXNpbmcgZGF0YSBmcm9tIHNlcnZlclxyXG4gICAgICAgICAgZGF0YTogcmVzLFxyXG4gICAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHJlbmRlckNhcmQoaXRlbSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29uZmlnLmNhcmRTZWN0aW9uQ2xhc3NcclxuICAgICAgKTtcclxuICAgICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuICB9KSlcclxuICAuY2F0Y2goKGVycikgPT57XHJcbiAgIGNvbnNvbGUuZXJyb3IoZXJyKVxyXG59KTtcclxuICBcclxuXHJcblxyXG5cclxuXHJcblxyXG5jb25zdCBwb3B1cEVkaXRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZV9fZWRpdC1tb2RhbFwiLFxyXG4gIChpbnB1dFZhbHVlcykgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMpO1xyXG4gICAgLy91cGRhdGluZyB1c2VySW5mbyAob24/YXQ/aW4pIHNlcnZlclxyXG4gICAgYXBpLnVwZGF0ZVVzZXJJbmZvKGlucHV0VmFsdWVzKVxyXG4gICAgLmNhdGNoKChlcnIpID0+e1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycilcclxuICAgIH0pXHJcbiAgICBwb3B1cEVkaXRGb3JtLmNsb3NlKCk7ICAgIFxyXG4gIH1cclxuKTtcclxuXHJcbmNvbnN0IHBvcHVwQXZhdGFyRnJvbSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3Byb2ZpbGVfX2F2YXRhcl9tb2RhbFwiLCAoaW5wdXRWYWx1ZXMpID0+IHsgIFxyXG4gIHBvcHVwQXZhdGFyRnJvbS50b2dnbGVTYXZlQnRuKCkgIFxyXG4gIGFwaS51cGRhdGVQcm9maWxlUGljdHVyZShpbnB1dFZhbHVlcykgIFxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIHByb2ZpbGVBdmF0YXIuc3JjID0gcmVzLmF2YXRhclxyXG4gIH0pIFxyXG4gIC8vLnRoZW4ocHJvZmlsZUF2YXRhci5vbmxvYWQgPSBwb3B1cEF2YXRhckZyb20uY2xvc2UoKSlcclxuICAvLy50aGVuKHBvcHVwQXZhdGFyRnJvbS5jbG9zZSgpKVxyXG4gIC8vLnRoZW4ocG9wdXBBdmF0YXJGcm9tLnRvZ2dsZVNhdmVCdG4oKSlcclxuICAuY2F0Y2goKGVycikgPT57XHJcbiAgICBjb25zb2xlLmVycm9yKGVycilcclxuICB9KVxyXG4gIC8vLmZpbmFsbHkocG9wdXBBdmF0YXJGcm9tLmNsb3NlKCkpXHJcbn0pXHJcblxyXG5jb25zdCBwb3B1cERlbGV0ZSA9IG5ldyBQb3B1cERlbGV0ZShcIiNjYXJkX19kZWxldGUtbW9kYWxcIik7XHJcblxyXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2NhcmRfX2ltYWdlLW1vZGFsXCIpO1xyXG5cclxuY29uc3QgcG9wdXBBZGRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZV9fYWRkLW1vZGFsXCIsIChpbnB1dFZhbHVlcykgPT4ge1xyXG4gIGFwaS5hZGROZXdDYXJkKGlucHV0VmFsdWVzKVxyXG4gIC50aGVuKChkYXRhKSA9PiByZW5kZXJDYXJkKGRhdGEpKVxyXG4gIC5jYXRjaCgoZXJyKSA9PntcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxyXG4gIH0pICBcclxuICBwb3B1cEFkZEZvcm0uY2xvc2UoKTtcclxufSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG4vLyBlbmFibGUgdmFsaWRhdGlvblxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XHJcbiAgICAvLyBoZXJlIHlvdSBnZXQgdGhlIG5hbWUgb2YgdGhlIGZvcm1cclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcclxuXHJcbiAgICAvLyBoZXJlIHlvdSBzdG9yZSBhIHZhbGlkYXRvciBieSB0aGUgYG5hbWVgIG9mIHRoZSBmb3JtXHJcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XHJcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbihjb25maWcpO1xyXG5cclxucG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEFkZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBFZGl0Rm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cERlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEF2YXRhckZyb20uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucHJvZmlsZUFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gcG9wdXBBZGRGb3JtLm9wZW4oKSk7XHJcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcG9wdXBFZGl0Rm9ybS5vcGVuKCk7XHJcbiAgcG9wdXBFZGl0Rm9ybS5zZXRJbnB1dFZhbHVlcyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcclxufSk7XHJcbnByb2ZpbGVBdmF0YXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3B1cEF2YXRhckZyb20ub3BlbigpOyAgXHJcbn0pXHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyl7XHJcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXRBcHBJbmZvKCl7XHJcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRJbml0aWFsQ2FyZHMsIHRoaXMuZ2V0VXNlckluZm9dKSAudGhlbigocmVzKSA9PntcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykgeyAgICAgICAgICBcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICBnZXRJbml0aWFsQ2FyZHMoKXtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCx7XHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKSBcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpe1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLHtcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHVwZGF0ZVVzZXJJbmZvKGlucHV0KXtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgbmFtZTogaW5wdXQubmFtZSAsXHJcbiAgICAgICAgICBhYm91dDogaW5wdXQuYWJvdXRcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gICAgfVxyXG5cclxuICAgIGFkZE5ld0NhcmQoaW5wdXQpe1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5hbWU6IGlucHV0Lm5hbWUsXHJcbiAgICAgICAgICBsaW5rOiBpbnB1dC5saW5rXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVDYXJkKGNhcmRJZCl7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gICAgfVxyXG4gICAgYWRkTGlrZShjYXJkSWQpe1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCx7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICAgIH1cclxuICAgIHJlbW92ZUxpa2UoY2FyZElkKXsgICAgICBcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAse1xyXG4gICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSkgICAgICBcclxuICAgIH1cclxuICAgIHVwZGF0ZVByb2ZpbGVQaWN0dXJlKGlucHV0KXtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAse1xyXG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgYXZhdGFyOiBpbnB1dC5saW5rXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICAgIH1cclxuICAgIFxyXG59XHJcblxyXG5cclxuLy9odHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwSWQvdXNlcnMvbWUvYXZhdGFyXHJcblxyXG5cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwRGVsZXRlIGV4dGVuZHMgUG9wdXB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKXtcclxuICAgICAgICBzdXBlcih7cG9wdXBTZWxlY3Rvcn0pXHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIpOyAgICAgICAgXHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHNldFN1Ym1pdEFjdGlvbihoYW5kbGVEZWxldGUpe1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZSA9IGhhbmRsZURlbGV0ZVxyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlKCk7ICAgICAgICAgICBcclxuICAgICAgICB9KTtcclxuICAgIH0gICAgXHJcbn07IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtY2FwdGlvblwiKTtcclxuICB9XHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7ICAgIFxyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbmFtZTtcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gbGluaztcclxuICB9XHJcbn1cclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2J1dHRvbkVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ0bihpbnB1dEVsKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXRCdG4oKTtcclxuICAgICAgLy9yZXNldCBcImV2ZW50XCJcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcclxuICAgICAgICAvLyBgc2V0VGltZW91dGAgaXMgbmVlZGVkIHRvIHdhaXQgdGlsbCB0aGUgZm9ybSBpcyBmdWxseSByZXNldCBhbmQgdGhlbiB0byBjYWxsIGB0b2dnbGVCdXR0b25TdGF0ZWBcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ0bihpbnB1dEVsKTtcclxuICAgICAgICB9LCAwKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9jaGVja1ZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIC8vdGFraW5nIGlucHV0RWwgZnJvbSBldmVudCBsaXNlbmVyc1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWwuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVTdWJtaXRCdG4oKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdEJ0bigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlU3VibWl0QnRuKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZVN1Ym1pdEJ0bigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlU3VibWl0QnRuKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJ1c2VySWQiLCJoYW5kbGVMaWtlQ2xpY2siLCJ0aGlzIiwiX2lkIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX3VzZXJJZCIsIl9jYXJkT3duZXJJZCIsIm93bmVyIiwiX2hhbmRsZUxpa2VDbGljayIsIl9saWtlQXJyIiwibGlrZXMiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdG4iLCJfY2FyZCIsIl9kZWxldGVCdG4iLCJfaW1hZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwiX3RvZ2dsZUxpa2VCdG4iLCJfb3BlbkltYWdlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiaXNMaWtlZCIsInNvbWUiLCJfcmVmIiwiX3JlbmRlckxpa2VzQ291bnRlciIsIl9saWtlQ291bnRlciIsInRleHRDb250ZW50IiwibGVuZ3RoIiwidXBkYXRlTGlrZXNDb3VudGVyIiwicmVtb3ZlQ2FyZCIsInJlbW92ZSIsImdldFZpZXciLCJzcmMiLCJhbHQiLCJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImNhcmRTZWN0aW9uQ2xhc3MiLCJjYXJkVGVwbGF0ZSIsIlNlY3Rpb24iLCJjYXJkTGlzdCIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJmb3JFYWNoIiwiaXRlbSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiYWRkIiwiX2Nsb3NlQnlFc2MiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybUVsIiwiX2lucHV0RWxzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9oYW5kbGVTdWJtaXQiLCJfc3VibWl0QnRuIiwic2V0SW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsInRvZ2dsZVNhdmVCdG4iLCJjb25zb2xlIiwibG9nIiwiVXNlckluZm8iLCJ0aXRsZSIsInN1YnRpdGxlIiwiX25hbWVFbCIsIl9qb2JFbCIsImdldFVzZXJJbmZvIiwiYWJvdXQiLCJzZXRVc2VySW5mbyIsInByb2ZpbGVBZGRCdG4iLCJwcm9maWxlRWRpdEJ0biIsInByb2ZpbGVBdmF0YXJCdG4iLCJwcm9maWxlQXZhdGFyIiwiY2FyZFNlY3Rpb24iLCJ1c2VySW5mbyIsInJlbmRlckNhcmQiLCJjYXJkIiwiY3JlYXRlQ2FyZCIsInBvcHVwSW1hZ2UiLCJjYXJkSWQiLCJwb3B1cERlbGV0ZSIsInNldFN1Ym1pdEFjdGlvbiIsImFwaSIsImRlbGV0ZUNhcmQiLCJ0aGVuIiwicmVtb3ZlTGlrZSIsInJlcyIsImFkZExpa2UiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZ2V0QXBwSW5mbyIsIlByb21pc2UiLCJhbGwiLCJnZXRJbml0aWFsQ2FyZHMiLCJfY2hlY2tSZXNwb25zZSIsIm9rIiwianNvbiIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidXBkYXRlVXNlckluZm8iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZE5ld0NhcmQiLCJ1cGRhdGVQcm9maWxlUGljdHVyZSIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJjYXRjaCIsImVyciIsImVycm9yIiwicG9wdXBFZGl0Rm9ybSIsInBvcHVwQXZhdGFyRnJvbSIsImhhbmRsZURlbGV0ZSIsIl9oYW5kbGVEZWxldGUiLCJfY2FwdGlvbiIsInBvcHVwQWRkRm9ybSIsImZvcm1WYWxpZGF0b3JzIiwiQXJyYXkiLCJmcm9tIiwiZm9ybUVsZW1lbnQiLCJ2YWxpZGF0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2J1dHRvbkVsIiwiaW5wdXRFbCIsIl9jaGVja1ZhbGlkaXR5IiwiX3RvZ2dsZVN1Ym1pdEJ0biIsIl9kaXNhYmxlU3VibWl0QnRuIiwic2V0VGltZW91dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9lbmFibGVTdWJtaXRCdG4iLCJldmVyeSIsImRpc2FibGVkIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9