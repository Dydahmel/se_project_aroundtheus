!function(){"use strict";class t{constructor(t,e,s){this._name=t.name,this._link=t.link,this._cardSelector=e,this._handeImageClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeBtn=this._card.querySelector("#card_like-button"),this._deleteBtn=this._card.querySelector(".card__delete-btn"),this._image=this._card.querySelector(".card__image"),this._likeBtn.addEventListener("click",(()=>this._toggleLikeBtn())),this._deleteBtn.addEventListener("click",(()=>this._removeCard())),this._image.addEventListener("click",(()=>this._openImage()))}_openImage(){this._handeImageClick(this._link,this._name)}_toggleLikeBtn(){this._likeBtn.classList.toggle("card__like-button_enabled")}_removeCard(){this._card.remove(),this._card=null}getView(){return this._card=this._getTemplate(),this._setEventListeners(),this._image.src=this._link,this._image.alt=this._name,this._card.querySelector(".card__title").textContent=this._name,this._card}}const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button-disabled",inputErrorClass:".modal__input-type-error",errorClass:"modal__error_visible",cardSectionClass:".cards__list",cardTeplate:".card__teplate"};class s{constructor(t,e){let{data:s,renderer:i}=t;this._renderedItems=s,this._renderer=i,this._container=document.querySelector(e)}addItem(t){this._container.prepend(t)}renderItems(){this._renderedItems.forEach((t=>{this._renderer(t)}))}}class i{constructor(t){let{popupSelector:e}=t;this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._closeByEsc)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._closeByEsc)}_closeByEsc=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(t=>{t.target.classList.contains("modal")&&this.close(),t.target.classList.contains("modal__close-button")&&this.close()}))}}class r extends i{constructor(t,s){super({popupSelector:t}),this._popupFormEl=this._popupElement.querySelector(e.formSelector),this._inputEls=this._popupFormEl.querySelectorAll(e.inputSelector),this._handleSubmit=s}setInputValues(t){this._inputEls.forEach((e=>{e.value=t[e.name]}))}close(){super.close(),this._popupFormEl.reset()}_getInputValues(){const t={};return this._inputEls.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._popupFormEl.addEventListener("submit",(()=>{this._handleSubmit(this._getInputValues())}))}}const n=document.querySelector("#profile__add-button"),o=document.querySelector("#profile__edit-btn");let l;function a(e){const s=function(e){return new t(e,"#card__template",c).getView()}(e);l.addItem(s)}function c(t,e){d.open(t,e)}new class{constructor(t){this._baseUrl=t.baseUrl,this._headers=t.headers}_checkResponse(t){return t.ok?(console.log("its here!"),t.json()):Promise.reject(`Error: ${t.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}getUserIngo(){}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"cd8b3986-f3d6-4da9-8f48-96bc48ae4bb7","Content-Type":"application/json"}}).getInitialCards().then((t=>{l=new s({data:t,renderer:t=>{a(t)}},e.cardSectionClass)})),l.renderItems();const _=new class{constructor(t){let{title:e,subtitle:s}=t;this._nameEl=document.querySelector(e),this._jobEl=document.querySelector(s)}getUserInfo(){return{title:this._nameEl.textContent,subtitle:this._jobEl.textContent}}setUserInfo(t){this._nameEl.textContent=t.title,this._jobEl.textContent=t.subtitle}}({title:".profile__title",subtitle:".profile__subtitle"}),d=new class extends i{constructor(t){super({popupSelector:t}),this._image=this._popupElement.querySelector(".modal__image"),this._caption=this._popupElement.querySelector(".modal__image-caption")}open(t,e){super.open(),this._image.src=t,this._image.alt=e,this._caption.textContent=e}}("#card__image-modal"),u=new r("#profile__add-modal",(t=>{a(t),u.close()})),h=new r("#profile__edit-modal",(t=>{_.setUserInfo(t),h.close()}));l.renderItems();const m={};(t=>{Array.from(document.querySelectorAll(t.formSelector)).forEach((e=>{const s=new class{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=e,this._buttonEl=this._formElement.querySelector(this._submitButtonSelector),this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)]}_setEventListeners(){this._inputEls.forEach((t=>{t.addEventListener("input",(()=>{this._checkValidity(t),this._toggleSubmitBtn(t)})),this._disableSubmitBtn(),this._formElement.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleSubmitBtn(t)}),0)}))}))}_checkValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_showInputError(t){const e=this._formElement.querySelector(`#${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._formElement.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}_toggleSubmitBtn(){this._hasInvalidInput()?this._disableSubmitBtn():this._enableSubmitBtn()}_hasInvalidInput(){return!this._inputEls.every((t=>t.validity.valid))}_disableSubmitBtn(){this._buttonEl.classList.add(this._inactiveButtonClass),this._buttonEl.disabled=!0}_enableSubmitBtn(){this._buttonEl.classList.remove(this._inactiveButtonClass),this._buttonEl.disabled=!1}enableValidation(){this._formElement.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}}(t,e),i=e.getAttribute("name");m[i]=s,s.enableValidation()}))})(e),d.setEventListeners(),u.setEventListeners(),h.setEventListeners(),n.addEventListener("click",(()=>u.open())),o.addEventListener("click",(()=>{h.open(),h.setInputValues(_.getUserInfo())}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ0biA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIiNjYXJkX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnRuID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idG5cIik7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2xpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX3RvZ2dsZUxpa2VCdG4oKSk7XHJcbiAgICB0aGlzLl9kZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX3JlbW92ZUNhcmQoKSk7XHJcbiAgICB0aGlzLl9pbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5fb3BlbkltYWdlKCkpO1xyXG4gIH1cclxuXHJcbiAgX29wZW5JbWFnZSgpIHtcclxuICAgIHRoaXMuX2hhbmRlSW1hZ2VDbGljayh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVMaWtlQnRuKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fZW5hYmxlZFwiKTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZDtcclxuICB9XHJcbn1cclxuIiwiLy9zZWxlY3RvcnMgZm9yIHZhbGlkYXRpb25cclxuXHJcbmNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnV0dG9uLWRpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIi5tb2RhbF9faW5wdXQtdHlwZS1lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxuICBjYXJkU2VjdGlvbkNsYXNzOiBcIi5jYXJkc19fbGlzdFwiLFxyXG4gIGNhcmRUZXBsYXRlOiBcIi5jYXJkX190ZXBsYXRlXCIsXHJcbn07XHJcblxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IHsgY29uZmlnLCBpbml0aWFsQ2FyZHMgfTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCByZW5kZXJlciB9LCBjYXJkTGlzdCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGRhdGE7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkTGlzdCk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuICBvcGVuKCkge1xyXG4gICAgLy9vcGVuIHBvcHVwXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlQnlFc2MpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIC8vY2xvc2UgcG9wdXBcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fY2xvc2VCeUVzYyk7XHJcbiAgfVxyXG4gIF9jbG9zZUJ5RXNjID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnV0dG9uXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7ICAgIFxyXG4gICAgdGhpcy5fcG9wdXBGb3JtRWwgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuZm9ybVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gdGhpcy5fcG9wdXBGb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7ICAgIFxyXG4gIH1cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAvLyBoZXJlIHlvdSBpbnNlcnQgdGhlIGB2YWx1ZWAgYnkgdGhlIGBuYW1lYCBvZiB0aGUgaW5wdXRcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm1FbC5yZXNldCgpO1xyXG4gIH0gIFxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgLy9nZXQgYWxsIGlucHV0cyAgICBcclxuICAgIC8vbG9vcCBvdmVyIGFsbCBpbnB1dHNcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIC8vYXNzaWduIGlucHV0cyB0byBlbXB0eSBvYmplY3QgYnkgbmFtZT12YWx1ZVxyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsIi8vYnV0IHdoeSB3ZSBjYW5ub3QganVzdCB1c2UgVEFCIGluZGVudGF0aW9uIG9uIGNvZGUgZm9ybWF0dGluZz8gd2h5IGl0IHNob3VsZCBiZSBkb3VibGUgc3BhY2U/XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBjb25maWcgLCBpbml0aWFsQ2FyZHN9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZS9pbmRleC5jc3NcIjtcclxuXHJcbmNvbnN0IHByb2ZpbGVBZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19lZGl0LWJ0blwiKTtcclxubGV0IGNhcmRTZWN0aW9uO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIGl0ZW0sXHJcbiAgICBcIiNjYXJkX190ZW1wbGF0ZVwiLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGlja1xyXG4gICkuZ2V0VmlldygpO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoaXRlbSk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhuYW1lLCBsaW5rKSB7XHJcbiAgcG9wdXBJbWFnZS5vcGVuKG5hbWUsIGxpbmspO1xyXG59XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImNkOGIzOTg2LWYzZDYtNGRhOS04ZjQ4LTk2YmM0OGFlNGJiN1wiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5hcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigocmVzKSA9PiB7XHJcbiAgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICAgIHtcclxuICAgICAgZGF0YTogcmVzLFxyXG4gICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICByZW5kZXJDYXJkKGl0ZW0pO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIGNvbmZpZy5jYXJkU2VjdGlvbkNsYXNzXHJcbiAgKTtcclxufSk7XHJcblxyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICB0aXRsZTogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBzdWJ0aXRsZTogXCIucHJvZmlsZV9fc3VidGl0bGVcIixcclxufSk7XHJcblxyXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2NhcmRfX2ltYWdlLW1vZGFsXCIpO1xyXG5cclxuY29uc3QgcG9wdXBBZGRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZV9fYWRkLW1vZGFsXCIsIChpbnB1dFZhbHVlcykgPT4ge1xyXG4gIHJlbmRlckNhcmQoaW5wdXRWYWx1ZXMpO1xyXG4gIHBvcHVwQWRkRm9ybS5jbG9zZSgpO1xyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwRWRpdEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlX19lZGl0LW1vZGFsXCIsXHJcbiAgKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dFZhbHVlcyk7XHJcbiAgICBwb3B1cEVkaXRGb3JtLmNsb3NlKCk7XHJcbiAgfVxyXG4pO1xyXG5cclxuXHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5cclxuLy8gZW5hYmxlIHZhbGlkYXRpb25cclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xyXG4gICAgLy8gaGVyZSB5b3UgZ2V0IHRoZSBuYW1lIG9mIHRoZSBmb3JtXHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcblxyXG4gICAgLy8gaGVyZSB5b3Ugc3RvcmUgYSB2YWxpZGF0b3IgYnkgdGhlIGBuYW1lYCBvZiB0aGUgZm9ybVxyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcclxuXHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBBZGRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwRWRpdEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnByb2ZpbGVBZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHBvcHVwQWRkRm9ybS5vcGVuKCkpO1xyXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwRWRpdEZvcm0ub3BlbigpO1xyXG4gIHBvcHVwRWRpdEZvcm0uc2V0SW5wdXRWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSk7XHJcbn0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyl7XHJcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIml0cyBoZXJlIVwiKVxyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIGdldEluaXRpYWxDYXJkcygpe1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLHtcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpIFxyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmdvKCl7XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHRpdGxlLCBzdWJ0aXRsZSB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRpdGxlKTtcclxuICAgIHRoaXMuX2pvYkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzdWJ0aXRsZSk7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdGl0bGU6IHRoaXMuX25hbWVFbC50ZXh0Q29udGVudCxcclxuICAgICAgc3VidGl0bGU6IHRoaXMuX2pvYkVsLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbiAgc2V0VXNlckluZm8odmFsdWUpIHtcclxuICAgIC8vc2V0IHVzZXIgaW5mbyBmcm9tIHZhbHVlXHJcbiAgICB0aGlzLl9uYW1lRWwudGV4dENvbnRlbnQgPSB2YWx1ZS50aXRsZTtcclxuICAgIHRoaXMuX2pvYkVsLnRleHRDb250ZW50ID0gdmFsdWUuc3VidGl0bGU7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLWNhcHRpb25cIik7XHJcbiAgfVxyXG4gIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgc3VwZXIub3BlbigpOyAgICBcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBsaW5rO1xyXG4gICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IGxpbms7XHJcbiAgfVxyXG59XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9idXR0b25FbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvciksXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdG4oaW5wdXRFbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLl9kaXNhYmxlU3VibWl0QnRuKCk7XHJcbiAgICAgIC8vcmVzZXQgXCJldmVudFwiXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCAoKSA9PiB7XHJcbiAgICAgICAgLy8gYHNldFRpbWVvdXRgIGlzIG5lZWRlZCB0byB3YWl0IHRpbGwgdGhlIGZvcm0gaXMgZnVsbHkgcmVzZXQgYW5kIHRoZW4gdG8gY2FsbCBgdG9nZ2xlQnV0dG9uU3RhdGVgXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdG4oaW5wdXRFbCk7XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICAvL3Rha2luZyBpbnB1dEVsIGZyb20gZXZlbnQgbGlzZW5lcnNcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2UuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlU3VibWl0QnRuKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXRCdG4oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZVN1Ym1pdEJ0bigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbHMuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVTdWJtaXRCdG4oKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZVN1Ym1pdEJ0bigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRlSW1hZ2VDbGljayIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ0biIsIl9jYXJkIiwiX2RlbGV0ZUJ0biIsIl9pbWFnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdG9nZ2xlTGlrZUJ0biIsIl9yZW1vdmVDYXJkIiwiX29wZW5JbWFnZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsImdldFZpZXciLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiY2FyZFNlY3Rpb25DbGFzcyIsImNhcmRUZXBsYXRlIiwiU2VjdGlvbiIsIl9yZWYiLCJjYXJkTGlzdCIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJmb3JFYWNoIiwiaXRlbSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiYWRkIiwiX2Nsb3NlQnlFc2MiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybUVsIiwiX2lucHV0RWxzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9oYW5kbGVTdWJtaXQiLCJzZXRJbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwicHJvZmlsZUFkZEJ0biIsInByb2ZpbGVFZGl0QnRuIiwiY2FyZFNlY3Rpb24iLCJyZW5kZXJDYXJkIiwiY2FyZCIsImNyZWF0ZUNhcmQiLCJwb3B1cEltYWdlIiwib3B0aW9ucyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJjb25zb2xlIiwibG9nIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJnZXRVc2VySW5nbyIsImF1dGhvcml6YXRpb24iLCJ1c2VySW5mbyIsInRpdGxlIiwic3VidGl0bGUiLCJfbmFtZUVsIiwiX2pvYkVsIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsIl9jYXB0aW9uIiwicG9wdXBBZGRGb3JtIiwicG9wdXBFZGl0Rm9ybSIsImZvcm1WYWxpZGF0b3JzIiwiQXJyYXkiLCJmcm9tIiwiZm9ybUVsZW1lbnQiLCJ2YWxpZGF0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2J1dHRvbkVsIiwiaW5wdXRFbCIsIl9jaGVja1ZhbGlkaXR5IiwiX3RvZ2dsZVN1Ym1pdEJ0biIsIl9kaXNhYmxlU3VibWl0QnRuIiwic2V0VGltZW91dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9lbmFibGVTdWJtaXRCdG4iLCJldmVyeSIsImRpc2FibGVkIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9