!function(){"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handeImageClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeBtn=this._card.querySelector("#card_like-button"),this._deleteBtn=this._card.querySelector(".card__delete-btn"),this._image=this._card.querySelector(".card__image"),this._likeBtn.addEventListener("click",(()=>this._toggleLikeBtn())),this._deleteBtn.addEventListener("click",(()=>this._removeCard())),this._image.addEventListener("click",(()=>this._openImage()))}_openImage(){this._handeImageClick(this._link,this._name)}_toggleLikeBtn(){this._likeBtn.classList.toggle("card__like-button_enabled")}_removeCard(){this._card.remove(),this._card=null}getView(){return this._card=this._getTemplate(),this._setEventListeners(),this._image.src=this._link,this._image.alt=this._name,this._card.querySelector(".card__title").textContent=this._name,this._card}}const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button-disabled",inputErrorClass:".modal__input-type-error",errorClass:"modal__error_visible",cardSectionClass:".cards__list",cardTeplate:".card__teplate"};class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._closeByEsc)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._closeByEsc)}_closeByEsc=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal")&&this.close(),e.target.classList.contains("modal__close-button")&&this.close()}))}}class i extends s{constructor(e,s){super({popupSelector:e}),this._popupFormEl=this._popupElement.querySelector(t.formSelector),this._inputEls=this._popupFormEl.querySelectorAll(t.inputSelector),this._handleSubmit=s}setInputValues(e){this._inputEls.forEach((t=>{t.value=e[t.name]}))}close(){super.close(),this._popupFormEl.reset()}_getInputValues(){const e={};return this._inputEls.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupFormEl.addEventListener("submit",(()=>{this._handleSubmit(this._getInputValues())}))}}const n=document.querySelector("#profile__add-button"),r=document.querySelector("#profile__edit-btn");function o(t){const s=function(t){return new e(t,"#card__template",l).getView()}(t);u.addItem(s)}function l(e,t){c.open(e,t)}new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){this._checkResponse}getUserIngo(){}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"cd8b3986-f3d6-4da9-8f48-96bc48ae4bb7","Content-Type":"application/json"}});const a=new class{constructor(e){let{title:t,subtitle:s}=e;this._nameEl=document.querySelector(t),this._jobEl=document.querySelector(s)}getUserInfo(){return{title:this._nameEl.textContent,subtitle:this._jobEl.textContent}}setUserInfo(e){this._nameEl.textContent=e.title,this._jobEl.textContent=e.subtitle}}({title:".profile__title",subtitle:".profile__subtitle"}),c=new class extends s{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector(".modal__image"),this._caption=this._popupElement.querySelector(".modal__image-caption")}open(e,t){super.open(),this._image.src=e,this._image.alt=t,this._caption.textContent=t}}("#card__image-modal"),_=new i("#profile__add-modal",(e=>{o(e),_.close()})),d=new i("#profile__edit-modal",(e=>{a.setUserInfo(e),d.close()})),u=new class{constructor(e,t){let{data:s,renderer:i}=e;this._renderedItems=s,this._renderer=i,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}}({data:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{o(e)}},t.cardSectionClass);u.renderItems();const h={};(e=>{Array.from(document.querySelectorAll(e.formSelector)).forEach((t=>{const s=new class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._buttonEl=this._formElement.querySelector(this._submitButtonSelector),this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)]}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e),this._toggleSubmitBtn(e)})),this._disableSubmitBtn(),this._formElement.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleSubmitBtn(e)}),0)}))}))}_checkValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleSubmitBtn(){this._hasInvalidInput()?this._disableSubmitBtn():this._enableSubmitBtn()}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_disableSubmitBtn(){this._buttonEl.classList.add(this._inactiveButtonClass),this._buttonEl.disabled=!0}_enableSubmitBtn(){this._buttonEl.classList.remove(this._inactiveButtonClass),this._buttonEl.disabled=!1}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}(e,t),i=t.getAttribute("name");h[i]=s,s.enableValidation()}))})(t),c.setEventListeners(),_.setEventListeners(),d.setEventListeners(),n.addEventListener("click",(()=>_.open())),r.addEventListener("click",(()=>{d.open(),d.setInputValues(a.getUserInfo())}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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InNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWwgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIGNhcmRFbDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdG4gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZF9saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ0biA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9saWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl90b2dnbGVMaWtlQnRuKCkpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9yZW1vdmVDYXJkKCkpO1xyXG4gICAgdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX29wZW5JbWFnZSgpKTtcclxuICB9XHJcblxyXG4gIF9vcGVuSW1hZ2UoKSB7XHJcbiAgICB0aGlzLl9oYW5kZUltYWdlQ2xpY2sodGhpcy5fbGluaywgdGhpcy5fbmFtZSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlTGlrZUJ0bigpIHtcclxuICAgIHRoaXMuX2xpa2VCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2VuYWJsZWRcIik7XHJcbiAgfVxyXG5cclxuICBfcmVtb3ZlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XHJcbiAgfVxyXG59XHJcbiIsIi8vc2VsZWN0b3JzIGZvciB2YWxpZGF0aW9uXHJcblxyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc2F2ZS1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlLWJ1dHRvbi1kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCIubW9kYWxfX2lucHV0LXR5cGUtZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbiAgY2FyZFNlY3Rpb25DbGFzczogXCIuY2FyZHNfX2xpc3RcIixcclxuICBjYXJkVGVwbGF0ZTogXCIuY2FyZF9fdGVwbGF0ZVwiLFxyXG59O1xyXG5cclxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCB7IGNvbmZpZywgaW5pdGlhbENhcmRzIH07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIC8vb3BlbiBwb3B1cFxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9jbG9zZUJ5RXNjKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICAvL2Nsb3NlIHBvcHVwXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlQnlFc2MpO1xyXG4gIH1cclxuICBfY2xvc2VCeUVzYyA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlLWJ1dHRvblwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pOyAgICBcclxuICAgIHRoaXMuX3BvcHVwRm9ybUVsID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLmZvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IHRoaXMuX3BvcHVwRm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0OyAgICBcclxuICB9XHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgLy8gaGVyZSB5b3UgaW5zZXJ0IHRoZSBgdmFsdWVgIGJ5IHRoZSBgbmFtZWAgb2YgdGhlIGlucHV0XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtRWwucmVzZXQoKTtcclxuICB9ICBcclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIC8vZ2V0IGFsbCBpbnB1dHMgICAgXHJcbiAgICAvL2xvb3Agb3ZlciBhbGwgaW5wdXRzXHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAvL2Fzc2lnbiBpbnB1dHMgdG8gZW1wdHkgb2JqZWN0IGJ5IG5hbWU9dmFsdWVcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCIvL2J1dCB3aHkgd2UgY2Fubm90IGp1c3QgdXNlIFRBQiBpbmRlbnRhdGlvbiBvbiBjb2RlIGZvcm1hdHRpbmc/IHdoeSBpdCBzaG91bGQgYmUgZG91YmxlIHNwYWNlP1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgY29uZmlnLCBpbml0aWFsQ2FyZHMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBcIi4uL3BhZ2UvaW5kZXguY3NzXCI7XHJcblxyXG5jb25zdCBwcm9maWxlQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fZWRpdC1idG5cIik7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKFxyXG4gICAgaXRlbSxcclxuICAgIFwiI2NhcmRfX3RlbXBsYXRlXCIsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrXHJcbiAgKS5nZXRWaWV3KCk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGl0ZW0pIHtcclxuICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChpdGVtKTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcclxuICBwb3B1cEltYWdlLm9wZW4obmFtZSwgbGluayk7XHJcbn1cclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiY2Q4YjM5ODYtZjNkNi00ZGE5LThmNDgtOTZiYzQ4YWU0YmI3XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICB0aXRsZTogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBzdWJ0aXRsZTogXCIucHJvZmlsZV9fc3VidGl0bGVcIixcclxufSk7XHJcblxyXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2NhcmRfX2ltYWdlLW1vZGFsXCIpO1xyXG5cclxuY29uc3QgcG9wdXBBZGRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZV9fYWRkLW1vZGFsXCIsIChpbnB1dFZhbHVlcykgPT4ge1xyXG4gIHJlbmRlckNhcmQoaW5wdXRWYWx1ZXMpO1xyXG4gIHBvcHVwQWRkRm9ybS5jbG9zZSgpO1xyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwRWRpdEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlX19lZGl0LW1vZGFsXCIsXHJcbiAgKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dFZhbHVlcyk7XHJcbiAgICBwb3B1cEVkaXRGb3JtLmNsb3NlKCk7XHJcbiAgfVxyXG4pO1xyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBkYXRhOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgcmVuZGVyQ2FyZChpdGVtKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBjb25maWcuY2FyZFNlY3Rpb25DbGFzc1xyXG4pO1xyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbi8vIGVuYWJsZSB2YWxpZGF0aW9uXHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcclxuICAgIC8vIGhlcmUgeW91IGdldCB0aGUgbmFtZSBvZiB0aGUgZm9ybVxyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG5cclxuICAgIC8vIGhlcmUgeW91IHN0b3JlIGEgdmFsaWRhdG9yIGJ5IHRoZSBgbmFtZWAgb2YgdGhlIGZvcm1cclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKGNvbmZpZyk7XHJcblxyXG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwQWRkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEVkaXRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wcm9maWxlQWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBwb3B1cEFkZEZvcm0ub3BlbigpKTtcclxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3B1cEVkaXRGb3JtLm9wZW4oKTtcclxuICBwb3B1cEVkaXRGb3JtLnNldElucHV0VmFsdWVzKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xyXG59KTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpe1xyXG4gICAgICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XHJcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuXHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIGdldEluaXRpYWxDYXJkcygpe1xyXG4gICAgICB0aGlzLl9jaGVja1Jlc3BvbnNlXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZ28oKXtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgdGl0bGUsIHN1YnRpdGxlIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGl0bGUpO1xyXG4gICAgdGhpcy5fam9iRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHN1YnRpdGxlKTtcclxuICB9XHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0aXRsZTogdGhpcy5fbmFtZUVsLnRleHRDb250ZW50LFxyXG4gICAgICBzdWJ0aXRsZTogdGhpcy5fam9iRWwudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuICBzZXRVc2VySW5mbyh2YWx1ZSkge1xyXG4gICAgLy9zZXQgdXNlciBpbmZvIGZyb20gdmFsdWVcclxuICAgIHRoaXMuX25hbWVFbC50ZXh0Q29udGVudCA9IHZhbHVlLnRpdGxlO1xyXG4gICAgdGhpcy5fam9iRWwudGV4dENvbnRlbnQgPSB2YWx1ZS5zdWJ0aXRsZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtY2FwdGlvblwiKTtcclxuICB9XHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7ICAgIFxyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbmFtZTtcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gbGluaztcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCByZW5kZXJlciB9LCBjYXJkTGlzdCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGRhdGE7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkTGlzdCk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2J1dHRvbkVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ0bihpbnB1dEVsKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXRCdG4oKTtcclxuICAgICAgLy9yZXNldCBcImV2ZW50XCJcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcclxuICAgICAgICAvLyBgc2V0VGltZW91dGAgaXMgbmVlZGVkIHRvIHdhaXQgdGlsbCB0aGUgZm9ybSBpcyBmdWxseSByZXNldCBhbmQgdGhlbiB0byBjYWxsIGB0b2dnbGVCdXR0b25TdGF0ZWBcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ0bihpbnB1dEVsKTtcclxuICAgICAgICB9LCAwKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9jaGVja1ZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIC8vdGFraW5nIGlucHV0RWwgZnJvbSBldmVudCBsaXNlbmVyc1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWwuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVTdWJtaXRCdG4oKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdEJ0bigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlU3VibWl0QnRuKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZVN1Ym1pdEJ0bigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlU3VibWl0QnRuKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGVJbWFnZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnRuIiwiX2NhcmQiLCJfZGVsZXRlQnRuIiwiX2ltYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl90b2dnbGVMaWtlQnRuIiwiX3JlbW92ZUNhcmQiLCJfb3BlbkltYWdlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiZ2V0VmlldyIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJjYXJkU2VjdGlvbkNsYXNzIiwiY2FyZFRlcGxhdGUiLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJhZGQiLCJfY2xvc2VCeUVzYyIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtRWwiLCJfaW5wdXRFbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2hhbmRsZVN1Ym1pdCIsInNldElucHV0VmFsdWVzIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwicHJvZmlsZUFkZEJ0biIsInByb2ZpbGVFZGl0QnRuIiwicmVuZGVyQ2FyZCIsIml0ZW0iLCJjYXJkIiwiY3JlYXRlQ2FyZCIsImNhcmRTZWN0aW9uIiwiYWRkSXRlbSIsInBvcHVwSW1hZ2UiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZ28iLCJhdXRob3JpemF0aW9uIiwidXNlckluZm8iLCJ0aXRsZSIsInN1YnRpdGxlIiwiX25hbWVFbCIsIl9qb2JFbCIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJfY2FwdGlvbiIsInBvcHVwQWRkRm9ybSIsInBvcHVwRWRpdEZvcm0iLCJjYXJkTGlzdCIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJyZW5kZXJJdGVtcyIsImZvcm1WYWxpZGF0b3JzIiwiQXJyYXkiLCJmcm9tIiwiZm9ybUVsZW1lbnQiLCJ2YWxpZGF0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2J1dHRvbkVsIiwiaW5wdXRFbCIsIl9jaGVja1ZhbGlkaXR5IiwiX3RvZ2dsZVN1Ym1pdEJ0biIsIl9kaXNhYmxlU3VibWl0QnRuIiwic2V0VGltZW91dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9lbmFibGVTdWJtaXRCdG4iLCJldmVyeSIsImRpc2FibGVkIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9