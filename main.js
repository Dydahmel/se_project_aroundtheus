!function(){"use strict";class e{constructor(e,t,s,n){this._id=e._id,this._name=e.name,this._link=e.link,this._cardSelector=t,this._handeImageClick=s,this._handleDeleteClick=n}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeBtn=this._card.querySelector("#card_like-button"),this._deleteBtn=this._card.querySelector(".card__delete-btn"),this._image=this._card.querySelector(".card__image"),this._likeBtn.addEventListener("click",(()=>this._toggleLikeBtn())),this._deleteBtn.addEventListener("click",(()=>this._handleDeleteClick(this._id))),this._image.addEventListener("click",(()=>this._openImage()))}_openImage(){this._handeImageClick(this._link,this._name)}_toggleLikeBtn(){this._likeBtn.classList.toggle("card__like-button_enabled")}removeCard(){this._card.remove(),this._card=null}getView(){return this._card=this._getTemplate(),this._setEventListeners(),this._image.src=this._link,this._image.alt=this._name,this._card.querySelector(".card__title").textContent=this._name,this._card}}const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button-disabled",inputErrorClass:".modal__input-type-error",errorClass:"modal__error_visible",cardSectionClass:".cards__list",cardTeplate:".card__teplate"};class s{constructor(e,t){let{data:s,renderer:n}=e;this._renderedItems=s,this._renderer=n,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}}class n{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._closeByEsc)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._closeByEsc)}_closeByEsc=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal")&&this.close(),e.target.classList.contains("modal__close-button")&&this.close()}))}}class i extends n{constructor(e,s){super({popupSelector:e}),this._popupFormEl=this._popupElement.querySelector(t.formSelector),this._inputEls=this._popupFormEl.querySelectorAll(t.inputSelector),this._handleSubmit=s}setInputValues(e){this._inputEls.forEach((t=>{t.value=e[t.name]}))}close(){super.close(),this._popupFormEl.reset()}_getInputValues(){const e={};return this._inputEls.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupFormEl.addEventListener("submit",(()=>{this._handleSubmit(this._getInputValues())}))}}class r{constructor(e){let{title:t,subtitle:s}=e;this._nameEl=document.querySelector(t),this._jobEl=document.querySelector(s)}getUserInfo(){return{name:this._nameEl.textContent,about:this._jobEl.textContent}}setUserInfo(e){this._nameEl.textContent=e.name,this._jobEl.textContent=e.about}}const o=document.querySelector("#profile__add-button"),l=document.querySelector("#profile__edit-btn");let a,c;function _(t){const s=function(t){return new e(t,"#card__template",d,h).getView()}(t);a.addItem(s)}function d(e,t){E.open(e,t)}function h(e){p.open(),p.setSubmitAction((()=>{u.deleteCard(e).then((e=>{console.log(e),this.removeCard(),p.close()}))}))}const u=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}updateUserInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkResponse)}addNewCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"cd8b3986-f3d6-4da9-8f48-96bc48ae4bb7","Content-Type":"application/json"}});u.getUserInfo().then((e=>{c=new r({title:".profile__title",subtitle:".profile__subtitle"}),c.setUserInfo(e)})),u.getInitialCards().then((e=>{a=new s({data:e,renderer:e=>{_(e)}},t.cardSectionClass),a.renderItems()}));const m=new i("#profile__edit-modal",(e=>{c.setUserInfo(e),u.updateUserInfo(e),m.close()})),p=new class extends n{constructor(e){super({popupSelector:e}),this._submitBtn=this._popupElement.querySelector(".modal__save-button")}setSubmitAction(e){this._handleDelete=e}setEventListeners(){super.setEventListeners(),this._submitBtn.addEventListener("mousedown",(()=>{this._handleDelete(),console.log("button is working")}))}}("#card__delete-modal"),E=new class extends n{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector(".modal__image"),this._caption=this._popupElement.querySelector(".modal__image-caption")}open(e,t){super.open(),this._image.src=e,this._image.alt=t,this._caption.textContent=t}}("#card__image-modal"),b=new i("#profile__add-modal",(e=>{u.addNewCard(e).then((e=>{_(e),console.log(e)})),b.close()})),S={};(e=>{Array.from(document.querySelectorAll(e.formSelector)).forEach((t=>{const s=new class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._buttonEl=this._formElement.querySelector(this._submitButtonSelector),this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)]}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e),this._toggleSubmitBtn(e)})),this._disableSubmitBtn(),this._formElement.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleSubmitBtn(e)}),0)}))}))}_checkValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleSubmitBtn(){this._hasInvalidInput()?this._disableSubmitBtn():this._enableSubmitBtn()}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_disableSubmitBtn(){this._buttonEl.classList.add(this._inactiveButtonClass),this._buttonEl.disabled=!0}_enableSubmitBtn(){this._buttonEl.classList.remove(this._inactiveButtonClass),this._buttonEl.disabled=!1}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}(e,t),n=t.getAttribute("name");S[n]=s,s.enableValidation()}))})(t),E.setEventListeners(),b.setEventListeners(),m.setEventListeners(),p.setEventListeners(),o.addEventListener("click",(()=>b.open())),l.addEventListener("click",(()=>{m.open(),m.setInputValues(c.getUserInfo())}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFXM0IsRUFBWTRCLGFBQWEsUUFHMUMvQixFQUFlOEIsR0FBWTFCLEVBQzNCQSxFQUFVd0Isa0JBQWtCLEdBQzVCLEVBR0pBLENBQWlCL0gsR0FFakIrRCxFQUFXL0Isb0JBQ1hrRSxFQUFhbEUsb0JBQ2I2RCxFQUFjN0Qsb0JBQ2RpQyxFQUFZakMsb0JBQ1p3QixFQUFjbkUsaUJBQWlCLFNBQVMsSUFBTTZHLEVBQWF6RSxTQUMzRGdDLEVBQWVwRSxpQkFBaUIsU0FBUyxLQUN2Q3dHLEVBQWNwRSxPQUNkb0UsRUFBY25ELGVBQWVpQixFQUFTTixjQUFjLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cERlbGV0ZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaywgaGFuZGxlRGVsZXRlQ2xpY2spIHtcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJldHVybiBjYXJkRWw7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnRuID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiI2NhcmRfbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdG4gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ0blwiKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5fdG9nZ2xlTGlrZUJ0bigpKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5faWQpKTtcclxuICAgIHRoaXMuX2ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9vcGVuSW1hZ2UoKSk7XHJcbiAgfVxyXG5cclxuICBfb3BlbkltYWdlKCkge1xyXG4gICAgdGhpcy5faGFuZGVJbWFnZUNsaWNrKHRoaXMuX2xpbmssIHRoaXMuX25hbWUpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUxpa2VCdG4oKSB7XHJcbiAgICB0aGlzLl9saWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9lbmFibGVkXCIpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XHJcbiAgfVxyXG59XHJcbiIsIi8vc2VsZWN0b3JzIGZvciB2YWxpZGF0aW9uXHJcblxyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc2F2ZS1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlLWJ1dHRvbi1kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCIubW9kYWxfX2lucHV0LXR5cGUtZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbiAgY2FyZFNlY3Rpb25DbGFzczogXCIuY2FyZHNfX2xpc3RcIixcclxuICBjYXJkVGVwbGF0ZTogXCIuY2FyZF9fdGVwbGF0ZVwiLFxyXG59O1xyXG5cclxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCB7IGNvbmZpZywgaW5pdGlhbENhcmRzIH07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY2FyZExpc3QpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBkYXRhO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZExpc3QpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIC8vb3BlbiBwb3B1cFxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9jbG9zZUJ5RXNjKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICAvL2Nsb3NlIHBvcHVwXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlQnlFc2MpO1xyXG4gIH1cclxuICBfY2xvc2VCeUVzYyA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlLWJ1dHRvblwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pOyAgICBcclxuICAgIHRoaXMuX3BvcHVwRm9ybUVsID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLmZvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IHRoaXMuX3BvcHVwRm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0OyAgICBcclxuICB9XHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgLy8gaGVyZSB5b3UgaW5zZXJ0IHRoZSBgdmFsdWVgIGJ5IHRoZSBgbmFtZWAgb2YgdGhlIGlucHV0XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtRWwucmVzZXQoKTtcclxuICB9ICBcclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIC8vZ2V0IGFsbCBpbnB1dHMgICAgXHJcbiAgICAvL2xvb3Agb3ZlciBhbGwgaW5wdXRzXHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAvL2Fzc2lnbiBpbnB1dHMgdG8gZW1wdHkgb2JqZWN0IGJ5IG5hbWU9dmFsdWVcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyB0aXRsZSwgc3VidGl0bGUgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aXRsZSk7XHJcbiAgICB0aGlzLl9qb2JFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc3VidGl0bGUpO1xyXG4gIH1cclxuICBcclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbC50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX2pvYkVsLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbiAgc2V0VXNlckluZm8odmFsdWUpIHtcclxuICAgIFxyXG4gICAgLy9zZXQgdXNlciBpbmZvIGZyb20gdmFsdWVcclxuICAgIHRoaXMuX25hbWVFbC50ZXh0Q29udGVudCA9IHZhbHVlLm5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbC50ZXh0Q29udGVudCA9IHZhbHVlLmFib3V0O1xyXG4gIH1cclxufVxyXG4iLCIvL2J1dCB3aHkgd2UgY2Fubm90IGp1c3QgdXNlIFRBQiBpbmRlbnRhdGlvbiBvbiBjb2RlIGZvcm1hdHRpbmc/IHdoeSBpdCBzaG91bGQgYmUgZG91YmxlIHNwYWNlP1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBEZWxldGUgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBEZWxldGUuanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZS9pbmRleC5jc3NcIjtcclxuXHJcbmNvbnN0IHByb2ZpbGVBZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19lZGl0LWJ0blwiKTtcclxuLy9wbGFjZWhvbGRlciBmb3Igc2VjdGlvblxyXG5sZXQgY2FyZFNlY3Rpb247XHJcbi8vcGxhY2Vob2xkZXIgZm9yIHVzZXJJbmZvXHJcbmxldCB1c2VySW5mbztcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICBpdGVtLFxyXG4gICAgXCIjY2FyZF9fdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDbGlja1xyXG4gICkuZ2V0VmlldygpO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoaXRlbSk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhuYW1lLCBsaW5rKSB7XHJcbiAgcG9wdXBJbWFnZS5vcGVuKG5hbWUsIGxpbmspO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDbGljayhjYXJkSWQpeyAgXHJcbiAgcG9wdXBEZWxldGUub3BlbigpXHJcbiAgcG9wdXBEZWxldGUuc2V0U3VibWl0QWN0aW9uKCAoKSA9PntcclxuICAgIGFwaS5kZWxldGVDYXJkKGNhcmRJZCkudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICB0aGlzLnJlbW92ZUNhcmQoKVxyXG4gICAgICBwb3B1cERlbGV0ZS5jbG9zZSgpXHJcbiAgICB9KVxyXG4gIH0pXHJcbiAgXHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG4vL25ldyBpbnN0IG9mIEFQSShzZXQgb3B0aW9ucylcclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJjZDhiMzk4Ni1mM2Q2LTRkYTktOGY0OC05NmJjNDhhZTRiYjdcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuYXBpLmdldFVzZXJJbmZvKCkudGhlbigocmVzKSA9PiB7XHJcbiAgLy9uZXcgVXNlckluZm8gXHJcbiAgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gICAgdGl0bGU6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXHJcbiAgICBzdWJ0aXRsZTogXCIucHJvZmlsZV9fc3VidGl0bGVcIixcclxuICB9KTtcclxuICAvL3NldHRpbmcgdXNlckluZm8gZnJvbSBzZXJ2ZXJcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMpXHJcbn0pXHJcblxyXG4vLyBsb2FkZWQgY2FyZHMgZnJvbSBzZXJ2ZXJcclxuYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKHJlcykgPT4ge1xyXG4gIC8vbmV3IHNlY3Rpb25cclxuICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAge1xyXG4gICAgICAvL3VzaW5nIGRhdGEgZnJvbSBzZXJ2ZXJcclxuICAgICAgZGF0YTogcmVzLFxyXG4gICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICByZW5kZXJDYXJkKGl0ZW0pO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIGNvbmZpZy5jYXJkU2VjdGlvbkNsYXNzXHJcbiAgKTtcclxuICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG59KTtcclxuXHJcblxyXG5jb25zdCBwb3B1cEVkaXRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZV9fZWRpdC1tb2RhbFwiLFxyXG4gIChpbnB1dFZhbHVlcykgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMpO1xyXG4gICAgLy91cGRhdGluZyB1c2VySW5mbyAob24/YXQ/aW4pIHNlcnZlclxyXG4gICAgYXBpLnVwZGF0ZVVzZXJJbmZvKGlucHV0VmFsdWVzKVxyXG4gICAgcG9wdXBFZGl0Rm9ybS5jbG9zZSgpO1xyXG4gIH1cclxuKTtcclxuXHJcblxyXG5cclxuY29uc3QgcG9wdXBEZWxldGUgPSBuZXcgUG9wdXBEZWxldGUoXCIjY2FyZF9fZGVsZXRlLW1vZGFsXCIpO1xyXG5cclxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNjYXJkX19pbWFnZS1tb2RhbFwiKTtcclxuXHJcbmNvbnN0IHBvcHVwQWRkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3Byb2ZpbGVfX2FkZC1tb2RhbFwiLCAoaW5wdXRWYWx1ZXMpID0+IHtcclxuICBhcGkuYWRkTmV3Q2FyZChpbnB1dFZhbHVlcykudGhlbigoZGF0YSkgPT4ge3JlbmRlckNhcmQoZGF0YSk7IGNvbnNvbGUubG9nKGRhdGEpfSkgIFxyXG4gIHBvcHVwQWRkRm9ybS5jbG9zZSgpO1xyXG59KTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbi8vIGVuYWJsZSB2YWxpZGF0aW9uXHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcclxuICAgIC8vIGhlcmUgeW91IGdldCB0aGUgbmFtZSBvZiB0aGUgZm9ybVxyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG5cclxuICAgIC8vIGhlcmUgeW91IHN0b3JlIGEgdmFsaWRhdG9yIGJ5IHRoZSBgbmFtZWAgb2YgdGhlIGZvcm1cclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKGNvbmZpZyk7XHJcblxyXG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwQWRkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEVkaXRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnByb2ZpbGVBZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHBvcHVwQWRkRm9ybS5vcGVuKCkpO1xyXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwRWRpdEZvcm0ub3BlbigpO1xyXG4gIHBvcHVwRWRpdEZvcm0uc2V0SW5wdXRWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSk7XHJcbn0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyl7XHJcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7ICAgICAgICAgIFxyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIGdldEluaXRpYWxDYXJkcygpe1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLHtcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpIFxyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCl7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAse1xyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICAgIH1cclxuXHJcblxyXG4gICAgdXBkYXRlVXNlckluZm8oaW5wdXQpe1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBuYW1lOiBpbnB1dC5uYW1lICxcclxuICAgICAgICAgIGFib3V0OiBpbnB1dC5hYm91dFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgICB9XHJcblxyXG4gICAgYWRkTmV3Q2FyZChpbnB1dCl7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgbmFtZTogaW5wdXQubmFtZSxcclxuICAgICAgICAgIGxpbms6IGlucHV0LmxpbmtcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNhcmQoY2FyZElkKXtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAse1xyXG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwRGVsZXRlIGV4dGVuZHMgUG9wdXB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKXtcclxuICAgICAgICBzdXBlcih7cG9wdXBTZWxlY3Rvcn0pXHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIpOyAgICAgICAgXHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHNldFN1Ym1pdEFjdGlvbihoYW5kbGVEZWxldGUpe1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZSA9IGhhbmRsZURlbGV0ZVxyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdidXR0b24gaXMgd29ya2luZycpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9ICAgIFxyXG59OyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLWNhcHRpb25cIik7XHJcbiAgfVxyXG4gIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgc3VwZXIub3BlbigpOyAgICBcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBsaW5rO1xyXG4gICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IGxpbms7XHJcbiAgfVxyXG59XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9idXR0b25FbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvciksXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdG4oaW5wdXRFbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLl9kaXNhYmxlU3VibWl0QnRuKCk7XHJcbiAgICAgIC8vcmVzZXQgXCJldmVudFwiXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCAoKSA9PiB7XHJcbiAgICAgICAgLy8gYHNldFRpbWVvdXRgIGlzIG5lZWRlZCB0byB3YWl0IHRpbGwgdGhlIGZvcm0gaXMgZnVsbHkgcmVzZXQgYW5kIHRoZW4gdG8gY2FsbCBgdG9nZ2xlQnV0dG9uU3RhdGVgXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdG4oaW5wdXRFbCk7XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICAvL3Rha2luZyBpbnB1dEVsIGZyb20gZXZlbnQgbGlzZW5lcnNcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2UuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlU3VibWl0QnRuKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXRCdG4oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZVN1Ym1pdEJ0bigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbHMuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVTdWJtaXRCdG4oKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZVN1Ym1pdEJ0bigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwidGhpcyIsIl9pZCIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnRuIiwiX2NhcmQiLCJfZGVsZXRlQnRuIiwiX2ltYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl90b2dnbGVMaWtlQnRuIiwiX29wZW5JbWFnZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZUNhcmQiLCJyZW1vdmUiLCJnZXRWaWV3Iiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImNhcmRTZWN0aW9uQ2xhc3MiLCJjYXJkVGVwbGF0ZSIsIlNlY3Rpb24iLCJfcmVmIiwiY2FyZExpc3QiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInJlbmRlckl0ZW1zIiwiZm9yRWFjaCIsIml0ZW0iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsImFkZCIsIl9jbG9zZUJ5RXNjIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm1FbCIsIl9pbnB1dEVscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfaGFuZGxlU3VibWl0Iiwic2V0SW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsIlVzZXJJbmZvIiwidGl0bGUiLCJzdWJ0aXRsZSIsIl9uYW1lRWwiLCJfam9iRWwiLCJnZXRVc2VySW5mbyIsImFib3V0Iiwic2V0VXNlckluZm8iLCJwcm9maWxlQWRkQnRuIiwicHJvZmlsZUVkaXRCdG4iLCJjYXJkU2VjdGlvbiIsInVzZXJJbmZvIiwicmVuZGVyQ2FyZCIsImNhcmQiLCJjcmVhdGVDYXJkIiwicG9wdXBJbWFnZSIsImNhcmRJZCIsInBvcHVwRGVsZXRlIiwic2V0U3VibWl0QWN0aW9uIiwiYXBpIiwiZGVsZXRlQ2FyZCIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwib3B0aW9ucyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidXBkYXRlVXNlckluZm8iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZE5ld0NhcmQiLCJhdXRob3JpemF0aW9uIiwicG9wdXBFZGl0Rm9ybSIsIl9zdWJtaXRCdG4iLCJoYW5kbGVEZWxldGUiLCJfaGFuZGxlRGVsZXRlIiwiX2NhcHRpb24iLCJwb3B1cEFkZEZvcm0iLCJmb3JtVmFsaWRhdG9ycyIsIkFycmF5IiwiZnJvbSIsImZvcm1FbGVtZW50IiwidmFsaWRhdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9idXR0b25FbCIsImlucHV0RWwiLCJfY2hlY2tWYWxpZGl0eSIsIl90b2dnbGVTdWJtaXRCdG4iLCJfZGlzYWJsZVN1Ym1pdEJ0biIsInNldFRpbWVvdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZW5hYmxlU3VibWl0QnRuIiwiZXZlcnkiLCJkaXNhYmxlZCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==